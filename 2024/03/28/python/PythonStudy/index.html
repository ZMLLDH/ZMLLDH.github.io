<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>pythonStudy | 木子的学习博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="数据类型变量12345678910111213141516# 1.变量不需要声明类型，Python的动态语言特性# 2.变量使用前都得先赋值，# 赋值以后才会被创建，新的变量是通过赋值的动作创建开辟内存空间的# 未赋值直接使用会报错，变量未定义age&#x3D;19print(age)# 3.赋值方式# 单个赋值age&#x3D;19# 批量赋值a&#x3D;b&#x3D;c&#x3D;1# 计算赋值d&#x3D;1+1# 分别赋值e,f,g&#x3D;1,2,3#">
<meta property="og:type" content="article">
<meta property="og:title" content="pythonStudy">
<meta property="og:url" content="http://example.com/2024/03/28/python/PythonStudy/index.html">
<meta property="og:site_name" content="木子的学习博客">
<meta property="og:description" content="数据类型变量12345678910111213141516# 1.变量不需要声明类型，Python的动态语言特性# 2.变量使用前都得先赋值，# 赋值以后才会被创建，新的变量是通过赋值的动作创建开辟内存空间的# 未赋值直接使用会报错，变量未定义age&#x3D;19print(age)# 3.赋值方式# 单个赋值age&#x3D;19# 批量赋值a&#x3D;b&#x3D;c&#x3D;1# 计算赋值d&#x3D;1+1# 分别赋值e,f,g&#x3D;1,2,3#">
<meta property="og:locale">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695099852628-2f6a33a8-3284-4347-ad7b-5bae9edd18f8.png#averageHue=%23e5e5e3&clientId=u4320fe4f-05b0-4&from=paste&height=377&id=u5d99494e&originHeight=565&originWidth=753&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=116504&status=done&style=none&taskId=ua2f58d6e-4da4-46bc-9592-b54a2bf4c1f&title=&width=502">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100218534-79edf0ed-e179-4a3d-8356-6710e4482ab6.png#averageHue=%23eff0f0&clientId=u4320fe4f-05b0-4&from=paste&height=363&id=u54c738a0&originHeight=544&originWidth=1058&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=101382&status=done&style=none&taskId=u1206c895-6312-4e10-9701-bbcd07ce474&title=&width=705.3333333333334">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100236886-bfe292f9-49a0-4824-9df7-98980f9e56c6.png#averageHue=%23dacfaf&clientId=u4320fe4f-05b0-4&from=paste&height=341&id=u4393a83f&originHeight=511&originWidth=1033&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=88935&status=done&style=none&taskId=u0d5ff430-c20f-439b-b009-88cd189a740&title=&width=688.6666666666666">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100262413-24c72f72-8dd6-4bb8-932e-040692979fa8.png#averageHue=%23ead6be&clientId=u4320fe4f-05b0-4&from=paste&height=281&id=ud0a7e00e&originHeight=421&originWidth=1054&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=103750&status=done&style=none&taskId=u41a78768-6de2-443b-9dd6-465569c437d&title=&width=702.6666666666666">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100280794-4b40885a-b01c-42bd-accd-f2a772cb4c09.png#averageHue=%23eaebeb&clientId=u4320fe4f-05b0-4&from=paste&height=161&id=u409e8344&originHeight=241&originWidth=995&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=57008&status=done&style=none&taskId=u9fd55668-428c-4af2-a6b3-a882540473a&title=&width=663.3333333333334">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100337700-c2f939da-68d7-4654-a2d4-12aa8b3ebe1b.png#averageHue=%23e2c18b&clientId=u4320fe4f-05b0-4&from=paste&height=529&id=ue19355ac&originHeight=794&originWidth=854&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=62357&status=done&style=none&taskId=u8e09489b-25ee-4624-a590-9e403b593fb&title=&width=569.3333333333334">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100472021-144f46ee-f931-4219-a678-ec8dd0f51536.png#averageHue=%23edeeee&clientId=u4320fe4f-05b0-4&from=paste&height=93&id=uce34f813&originHeight=139&originWidth=681&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=16378&status=done&style=none&taskId=ub18fa4b9-624d-4ebe-92a2-72fea178e68&title=&width=454">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100482595-610bb33e-3e91-4f0b-b9f0-48f0752a79f5.png#averageHue=%23eeefef&clientId=u4320fe4f-05b0-4&from=paste&height=93&id=uf0071794&originHeight=140&originWidth=700&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=19543&status=done&style=none&taskId=u3f01fc13-5af1-4db1-ac58-0c68f4c9254&title=&width=466.6666666666667">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695630349657-17ab35f8-6fb3-4cc4-9ecc-152c87d62d73.png#averageHue=%231e1d1b&clientId=ubc405619-8752-4&from=paste&height=261&id=ubffa548b&originHeight=392&originWidth=733&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=36063&status=done&style=none&taskId=u56e7e92d-8a67-452b-8a94-1d050625574&title=&width=488.6666666666667">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695633670386-6fdeb774-fe0b-4ce7-8ec4-50b77b2132f8.png#averageHue=%231f1d1c&clientId=ubc405619-8752-4&from=paste&height=241&id=u625ed27b&originHeight=362&originWidth=718&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=34378&status=done&style=none&taskId=u063a110e-6b1d-4907-ae4d-1375d57ed05&title=&width=478.6666666666667">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695634075885-d9e7beda-7474-4cca-b5fc-fd7f5828a653.png#averageHue=%23211e1c&clientId=ubc405619-8752-4&from=paste&height=127&id=uc4e0a952&originHeight=190&originWidth=727&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=21813&status=done&style=none&taskId=u80eab2a2-7da1-4df2-a3ce-e4e7bc870f3&title=&width=484.6666666666667">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695718863564-ea6ec5cd-87bc-4060-922e-aa53fb3b29cb.png#averageHue=%23201e1c&clientId=ubc405619-8752-4&from=paste&height=131&id=u88106c96&originHeight=197&originWidth=751&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=20156&status=done&style=none&taskId=u5b68a4ce-153a-4f0f-a9fe-35d26908172&title=&width=500.6666666666667">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695719249376-460b5749-59e0-401d-9210-129dcb586ae5.png#averageHue=%231f1d1c&clientId=ubc405619-8752-4&from=paste&height=377&id=uffdf2f09&originHeight=565&originWidth=758&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=50844&status=done&style=none&taskId=u4058cf2b-2770-4b55-9d73-44c8392df54&title=&width=505.3333333333333">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695720437195-81ca41dc-6ada-476e-b4dc-f6531378cd64.png#averageHue=%231d1c1a&clientId=ubc405619-8752-4&from=paste&height=57&id=uf8154ccd&originHeight=85&originWidth=312&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=4126&status=done&style=none&taskId=ua57063b0-b6b7-4350-9402-b52265fd266&title=&width=208">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695799504353-812860eb-2e33-428c-a9e4-f3748424ecdb.png#averageHue=%23fcfaf9&clientId=ubc405619-8752-4&from=paste&height=271&id=u03bd224d&originHeight=407&originWidth=479&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=22656&status=done&style=none&taskId=u753d5ebe-badf-41c9-b58c-ea02fae63c8&title=&width=319.3333333333333">
<meta property="og:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695875040590-f0bc3fcc-57d5-4510-8785-9104bdd226b7.png#averageHue=%23201e1c&clientId=ubc405619-8752-4&from=paste&height=155&id=u9bccc82b&originHeight=233&originWidth=747&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=25610&status=done&style=none&taskId=uc4c3e99d-8c70-45af-80f1-33bda3ec6fd&title=&width=498">
<meta property="article:published_time" content="2024-03-27T16:00:00.000Z">
<meta property="article:modified_time" content="2024-03-29T02:43:07.237Z">
<meta property="article:author" content="XiaoLi">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695099852628-2f6a33a8-3284-4347-ad7b-5bae9edd18f8.png#averageHue=%23e5e5e3&clientId=u4320fe4f-05b0-4&from=paste&height=377&id=u5d99494e&originHeight=565&originWidth=753&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=116504&status=done&style=none&taskId=ua2f58d6e-4da4-46bc-9592-b54a2bf4c1f&title=&width=502">
  
    <link rel="alternate" href="/atom.xml" title="木子的学习博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">木子的学习博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Suche"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-python/PythonStudy" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/03/28/python/PythonStudy/" class="article-date">
  <time class="dt-published" datetime="2024-03-27T16:00:00.000Z" itemprop="datePublished">2024-03-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/python/">python</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      pythonStudy
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.变量不需要声明类型，Python的动态语言特性</span></span><br><span class="line"><span class="comment"># 2.变量使用前都得先赋值，</span></span><br><span class="line"><span class="comment"># 赋值以后才会被创建，新的变量是通过赋值的动作创建开辟内存空间的</span></span><br><span class="line"><span class="comment"># 未赋值直接使用会报错，变量未定义</span></span><br><span class="line">age=<span class="number">19</span></span><br><span class="line"><span class="built_in">print</span>(age)</span><br><span class="line"><span class="comment"># 3.赋值方式</span></span><br><span class="line"><span class="comment"># 单个赋值</span></span><br><span class="line">age=<span class="number">19</span></span><br><span class="line"><span class="comment"># 批量赋值</span></span><br><span class="line">a=b=c=<span class="number">1</span></span><br><span class="line"><span class="comment"># 计算赋值</span></span><br><span class="line">d=<span class="number">1</span>+<span class="number">1</span></span><br><span class="line"><span class="comment"># 分别赋值</span></span><br><span class="line">e,f,g=<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span></span><br><span class="line"><span class="comment"># 4.常量，Python中用全部大写的方式表达常量</span></span><br></pre></td></tr></table></figure>
<h5 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h5><p>当我们写：a &#x3D; “Jack” 时，Python解释器干了两件事情：</p>
<ol>
<li>在内存中创建了一个’Jack’的字符串对象；</li>
<li>在内存中创建了一个名为a的变量，并把它指向 ‘Jack’。</li>
</ol>
<p>而当你把一个变量a赋值给另一个变量b，这个操作实际上是将变量b指向变量a所指向的数据<br>Python中的一切都是对象，变量就是对对象的引用</p>
<p>通过id()可以查看变量值的内存地址</p>
<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><h5 id="定义字符串"><a href="#定义字符串" class="headerlink" title="定义字符串"></a>定义字符串</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">name_1 = <span class="string">&#x27;Jack&#x27;</span>  <span class="comment"># 单引号</span></span><br><span class="line">name_2 = <span class="string">&quot;Jack&quot;</span>  <span class="comment"># 双引号</span></span><br><span class="line">name_3 =  <span class="string">&#x27;&#x27;&#x27;Jack&#x27;&#x27;&#x27;</span> <span class="comment"># 三个单引号</span></span><br><span class="line">name_4 = <span class="string">&quot;&quot;&quot;Jack&quot;&quot;&quot;</span>  <span class="comment"># 三个双引号</span></span><br><span class="line">name_1 == name_2 == name_3 == name_4   <span class="comment">#true</span></span><br><span class="line"><span class="comment"># 这四种方式等价，同时，三引号可以创建多行字符串</span></span><br></pre></td></tr></table></figure>
<h5 id="常用方法"><a href="#常用方法" class="headerlink" title="常用方法"></a>常用方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 去除两边空格</span></span><br><span class="line">msg = <span class="string">&quot;    Python编程时光    &quot;</span></span><br><span class="line">msg.lstrip()  <span class="comment"># 去除左边空格</span></span><br><span class="line">msg.rstrip()  <span class="comment"># 去除右边空格</span></span><br><span class="line">msg.strip()   <span class="comment"># 去除左右两边空格</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断字符串是否以某字符串开头</span></span><br><span class="line">msg = <span class="string">&quot;Hello, Python&quot;</span></span><br><span class="line">msg.startswith(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"><span class="comment"># 判断字符串是否以某字符串结尾</span></span><br><span class="line">msg.endswith(<span class="string">&quot;Python&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 分割字符串</span></span><br><span class="line">languages = <span class="string">&quot;Python,Java,Golang&quot;</span></span><br><span class="line">languages.split(<span class="string">&quot;,&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 是判断是否都由数字组成</span></span><br><span class="line">age = <span class="built_in">input</span>(<span class="string">&quot;please input your age: &quot;</span>)</span><br><span class="line">age.isdigit()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># str转bytes</span></span><br><span class="line">myBytes = myStr.encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">myBytes = <span class="built_in">bytes</span>(myStr, encoding=<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line"><span class="comment"># bytes转str</span></span><br><span class="line">myStr = myBytes.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="数据类型-1"><a href="#数据类型-1" class="headerlink" title="数据类型"></a>数据类型</h3><h4 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用type()来查看类型</span></span><br><span class="line">a=<span class="number">1</span></span><br><span class="line"><span class="built_in">type</span>(a)</span><br><span class="line"><span class="comment"># 十六进制：用0x前缀和0-9，a-f表示，例如：0xff00，0xa5b4c3d2。</span></span><br><span class="line"><span class="comment"># 八进制：用0o前缀和0-7表示，例如0o12</span></span><br></pre></td></tr></table></figure>
<h4 id="浮点数"><a href="#浮点数" class="headerlink" title="浮点数"></a>浮点数</h4><p>之所以称为浮点数，是因为按照科学记数法表示时，一个浮点数的小数点位置是可变的，比如，1.23x10^9和12.3x10^8是完全相等的。浮点数可以用数学写法，如1.23，3.14，-9.01，等等。但是对于很大或很小的浮点数，就必须用科学计数法表示，把10用e替代，1.23x109就是1.23e9，或者12.3e8，0.000012可以写成1.2e-5，等等。</p>
<h4 id="复数"><a href="#复数" class="headerlink" title="复数"></a>复数</h4><p>复数由实数部分和虚数部分构成，可以用a + bj，或者 complex(a,b) 表示，复数的实部a和虚部b都是浮点型。</p>
<h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>布尔类型只有两个值<br>True：表示真值<br>False：表示假值<br><strong>这里注意，首字母大写，没有其他的变型</strong></p>
<h5 id="布尔类型转换：使用bool"><a href="#布尔类型转换：使用bool" class="headerlink" title="布尔类型转换：使用bool()"></a>布尔类型转换：使用bool()</h5><h6 id="下面这些值经过-bool-转换后是假值："><a href="#下面这些值经过-bool-转换后是假值：" class="headerlink" title="下面这些值经过 bool 转换后是假值："></a>下面这些值经过 bool 转换后是假值：</h6><p>0、0.0、-0.0<br>None：这个后面会讲到<br>空字符串、空列表、空元组、空字典</p>
<h6 id="而这些会转换成真值"><a href="#而这些会转换成真值" class="headerlink" title="而这些会转换成真值"></a>而这些会转换成真值</h6><p>-1、1或者其他非0数值<br>所有非空字符串，包括 “False”<br>所有非空字典、非空列表、非空集合，非空元组</p>
<h5 id="布尔运算"><a href="#布尔运算" class="headerlink" title="布尔运算"></a>布尔运算</h5><p>布尔类型可以进行 and、or和 not运算。<br>在四则运算中，True为1，False为0</p>
<h4 id="空值None"><a href="#空值None" class="headerlink" title="空值None"></a>空值None</h4><p>类型为NoneType</p>
<h4 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h4><h5 id="输入input"><a href="#输入input" class="headerlink" title="输入input"></a>输入input</h5><p>input()函数，会将用户输入的保存为字符串，括号里面加上双引号里面的字符串会打印出来提示用户输入。</p>
<h5 id="输出print"><a href="#输出print" class="headerlink" title="输出print"></a>输出print</h5><p>print可以接受多个字符串，字符串类型的变量或者可print的对象。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多个字符串输出，如果是逗号分开，会自动加一个空格</span></span><br><span class="line">a = <span class="string">&quot;i am&quot;</span></span><br><span class="line">b = <span class="string">&quot;student&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a,<span class="string">&quot;a&quot;</span> , b)</span><br><span class="line"><span class="comment"># i am a student      # 自动以空格分隔</span></span><br><span class="line"><span class="comment"># 如果是+连接</span></span><br><span class="line"><span class="built_in">print</span>(a+<span class="string">&quot;a&quot;</span>+b)</span><br><span class="line"><span class="comment"># i amastudent        # 无分隔</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># print原型：print(self, *args, sep=&#x27; &#x27;, end=&#x27;\n&#x27;, file=None)</span></span><br><span class="line"><span class="comment"># sep是选用的分隔符，默认&#x27; &#x27;，end参数是打印以后的结束方式，默认换行，设置为空即不换行</span></span><br><span class="line">a = <span class="string">&quot;i am&quot;</span> </span><br><span class="line">b = <span class="string">&quot;student&quot;</span></span><br><span class="line"><span class="built_in">print</span>(a,<span class="string">&quot;a&quot;</span> , b, sep=<span class="string">&quot;*&quot;</span>)</span><br><span class="line"><span class="comment"># i am*a*student</span></span><br></pre></td></tr></table></figure>
<h5 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h5><p>用input获取到的都是字符串，如果想要其他类型，可以用函数转换</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">age = <span class="built_in">input</span>(<span class="string">&quot;please input your age: &quot;</span>)</span><br><span class="line">age = <span class="built_in">int</span>(age)</span><br><span class="line"><span class="comment"># age为int</span></span><br></pre></td></tr></table></figure>
<h4 id="字符串格式化"><a href="#字符串格式化" class="headerlink" title="字符串格式化"></a>字符串格式化</h4><p>格式化输出，主要有三种方式</p>
<ol>
<li>使用 % 进行格式化<ol>
<li><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695099852628-2f6a33a8-3284-4347-ad7b-5bae9edd18f8.png#averageHue=%23e5e5e3&clientId=u4320fe4f-05b0-4&from=paste&height=377&id=u5d99494e&originHeight=565&originWidth=753&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=116504&status=done&style=none&taskId=ua2f58d6e-4da4-46bc-9592-b54a2bf4c1f&title=&width=502" alt="image.png"></li>
</ol>
</li>
<li>使用 format 函数进行格式化</li>
<li>使用 f-string 进行格式化<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用 % 进行格式化</span></span><br><span class="line">name = <span class="string">&quot;Jack&quot;</span></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;我的名字是: %s，今年 %d 岁&quot;</span> %(name, age))</span><br><span class="line"><span class="comment"># 我的名字是: Jack，今年 18 岁</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 format 函数</span></span><br><span class="line"><span class="comment"># 使用 &#123;&#125; 进行占位，然后在字符串后跟上 .format() 函数，这个函数的参数就是我们要往字符串中填充的变量。</span></span><br><span class="line"><span class="comment"># format 函数会依次填充，比如第一个 &#123;&#125; 会取到第一个参数 name，第二个 &#123;&#125; 会取到第二个参数 age</span></span><br><span class="line">name = <span class="string">&quot;Jack&quot;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>age = <span class="number">18</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(<span class="string">&quot;我的名字是:&#123;&#125;, 今年 &#123;&#125; 岁&quot;</span>.<span class="built_in">format</span>(name, age))</span><br><span class="line"><span class="comment"># 我的名字是:Jack, 今年 18 岁</span></span><br><span class="line"><span class="comment"># 变量较多也可以使用索引： print(&quot;我的名字是:&#123;0&#125;, 今年 &#123;1&#125; 岁&quot;.format(name, age))</span></span><br><span class="line"><span class="comment"># 也可以直接用名字：print(&quot;我的名字是:&#123;name&#125;, 今年 &#123;age&#125; 岁&quot;.format(name=name, age=age))</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用 f-string </span></span><br><span class="line"><span class="comment"># 只要在字符串前面加一个 f，开启 f-string ，就可以在字符中写入变量。</span></span><br><span class="line">name = <span class="string">&quot;Jack&quot;</span></span><br><span class="line">age = <span class="number">18</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;我的名字是:<span class="subst">&#123;name&#125;</span>, 今年 <span class="subst">&#123;age&#125;</span> 岁&quot;</span>)</span><br><span class="line"><span class="comment"># 我的名字是:Jack, 今年 18 岁</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100218534-79edf0ed-e179-4a3d-8356-6710e4482ab6.png#averageHue=%23eff0f0&clientId=u4320fe4f-05b0-4&from=paste&height=363&id=u54c738a0&originHeight=544&originWidth=1058&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=101382&status=done&style=none&taskId=u1206c895-6312-4e10-9701-bbcd07ce474&title=&width=705.3333333333334" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100236886-bfe292f9-49a0-4824-9df7-98980f9e56c6.png#averageHue=%23dacfaf&clientId=u4320fe4f-05b0-4&from=paste&height=341&id=u4393a83f&originHeight=511&originWidth=1033&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=88935&status=done&style=none&taskId=u0d5ff430-c20f-439b-b009-88cd189a740&title=&width=688.6666666666666" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100262413-24c72f72-8dd6-4bb8-932e-040692979fa8.png#averageHue=%23ead6be&clientId=u4320fe4f-05b0-4&from=paste&height=281&id=ud0a7e00e&originHeight=421&originWidth=1054&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=103750&status=done&style=none&taskId=u41a78768-6de2-443b-9dd6-465569c437d&title=&width=702.6666666666666" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100280794-4b40885a-b01c-42bd-accd-f2a772cb4c09.png#averageHue=%23eaebeb&clientId=u4320fe4f-05b0-4&from=paste&height=161&id=u409e8344&originHeight=241&originWidth=995&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=57008&status=done&style=none&taskId=u9fd55668-428c-4af2-a6b3-a882540473a&title=&width=663.3333333333334" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100337700-c2f939da-68d7-4654-a2d4-12aa8b3ebe1b.png#averageHue=%23e2c18b&clientId=u4320fe4f-05b0-4&from=paste&height=529&id=ue19355ac&originHeight=794&originWidth=854&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=62357&status=done&style=none&taskId=u8e09489b-25ee-4624-a590-9e403b593fb&title=&width=569.3333333333334" alt="image.png"></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 成员运算符</span></span><br><span class="line"><span class="string">&quot;Apple&quot;</span> <span class="keyword">in</span> [<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Huawei&quot;</span>]</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="string">&quot;Vivo&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Huawei&quot;</span>]</span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 身份运算符</span></span><br><span class="line">b = <span class="number">1000</span></span><br><span class="line">a = <span class="number">1000</span></span><br><span class="line"><span class="built_in">id</span>(a)</span><br><span class="line"><span class="comment"># 4532310864</span></span><br><span class="line"><span class="built_in">id</span>(b)</span><br><span class="line"><span class="comment"># 4532311632</span></span><br><span class="line">a <span class="keyword">is</span> b</span><br><span class="line"><span class="comment"># False</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100472021-144f46ee-f931-4219-a678-ec8dd0f51536.png#averageHue=%23edeeee&clientId=u4320fe4f-05b0-4&from=paste&height=93&id=uce34f813&originHeight=139&originWidth=681&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=16378&status=done&style=none&taskId=ub18fa4b9-624d-4ebe-92a2-72fea178e68&title=&width=454" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695100482595-610bb33e-3e91-4f0b-b9f0-48f0752a79f5.png#averageHue=%23eeefef&clientId=u4320fe4f-05b0-4&from=paste&height=93&id=uf0071794&originHeight=140&originWidth=700&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=19543&status=done&style=none&taskId=u3f01fc13-5af1-4db1-ac58-0c68f4c9254&title=&width=466.6666666666667" alt="image.png"></p>
<h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h4 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.创建列表</span></span><br><span class="line"><span class="comment"># 两种方式</span></span><br><span class="line"><span class="comment"># 第一种，先建空列表，再往里面添加元素</span></span><br><span class="line">a=<span class="built_in">list</span>()</span><br><span class="line">a.append(<span class="string">&quot;aa&quot;</span>)</span><br><span class="line">a.append(<span class="string">&quot;aaa&quot;</span>)</span><br><span class="line">a.append(<span class="string">&quot;aaaa&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="comment"># [&#x27;aa&#x27;, &#x27;aaa&#x27;, &#x27;aaaa&#x27;]</span></span><br><span class="line"><span class="comment"># 第二种直接定义列表填充元素</span></span><br><span class="line">a=[<span class="string">&#x27;aa&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>, <span class="string">&#x27;aaaa&#x27;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.增删查改</span></span><br><span class="line"><span class="comment"># 查看元素，直接用索引，和C数组一样，从0开始</span></span><br><span class="line">a=[<span class="string">&#x27;aa&#x27;</span>, <span class="string">&#x27;aaa&#x27;</span>, <span class="string">&#x27;aaaa&#x27;</span>]</span><br><span class="line"><span class="built_in">print</span>(a[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 使用方法与函数</span></span><br><span class="line"><span class="comment"># 使用index方法：查看第一个值为？的索引</span></span><br><span class="line">a.index(<span class="string">&quot;aa&quot;</span>)</span><br><span class="line"><span class="comment"># 使用count方法查看值为？的个数</span></span><br><span class="line">a.count(<span class="string">&quot;aa&quot;</span>)</span><br><span class="line"><span class="comment"># 使用内置函数len查看列表元素个数</span></span><br><span class="line"><span class="built_in">len</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新增元素</span></span><br><span class="line"><span class="comment"># 使用列表的方法：append,insert,extend</span></span><br><span class="line"><span class="comment"># append:将元素插到列表的最后一个位置</span></span><br><span class="line"><span class="comment"># insert:将元素插到列表的指定位置</span></span><br><span class="line">a.insert(<span class="number">1</span>,<span class="string">&quot;b&quot;</span>)  <span class="comment">#把b插到索引为1的位置，原本1号位置往后挪</span></span><br><span class="line"><span class="comment"># extend:将新列表直接连接到旧列表后面</span></span><br><span class="line">b=[<span class="string">&quot;bb&quot;</span>,<span class="string">&quot;bbb&quot;</span>]</span><br><span class="line">a.extend(b)</span><br><span class="line"><span class="comment"># [&#x27;aa&#x27;, &#x27;aaa&#x27;, &#x27;aaaa&#x27;, &#x27;bb&#x27;, &#x27;bbb&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改元素</span></span><br><span class="line"><span class="comment"># 直接使用 list[x]=new_item 的方法直接替换</span></span><br><span class="line">a[<span class="number">1</span>]=<span class="string">&quot;ab&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除元素</span></span><br><span class="line"><span class="comment"># 使用pop,remove,clear方法和del语句</span></span><br><span class="line"><span class="comment"># pop方法：删除指定位置元素，默认最后一个</span></span><br><span class="line">a.pop()		<span class="comment">#删除最后一个</span></span><br><span class="line">a.pop(<span class="number">0</span>)	<span class="comment">#删除索引为0的元素</span></span><br><span class="line"><span class="comment"># remove方法：删除第一个值为？的元素</span></span><br><span class="line">a.remove(<span class="string">&quot;aa&quot;</span>)</span><br><span class="line"><span class="comment"># clear方法：清空元素</span></span><br><span class="line">a.clear()</span><br><span class="line"><span class="comment"># del语句，清空列表</span></span><br><span class="line"><span class="keyword">del</span> a[:]</span><br><span class="line"><span class="comment"># del删除某个或几个连续的元素</span></span><br><span class="line"><span class="keyword">del</span> a[<span class="number">0</span>]	<span class="comment">#删除索引为0的元素</span></span><br><span class="line"><span class="keyword">del</span> a[<span class="number">0</span>:<span class="number">3</span>]	<span class="comment">#删除索引[1,3)区间的元素</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表反转,两种方法</span></span><br><span class="line"><span class="comment"># reverse</span></span><br><span class="line">nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">nums.reverse()</span><br><span class="line"><span class="comment"># [5, 4, 3, 2, 1]</span></span><br><span class="line"><span class="comment"># 切片</span></span><br><span class="line">nums = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">nums[::-<span class="number">1</span>]</span><br><span class="line"><span class="comment"># [5, 4, 3, 2, 1]</span></span><br><span class="line"><span class="comment"># 两种方法区别：reverse 方法是原地反转，作用在原对象上；切片反转是返回一个新对象，原对象不改变</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 列表排序，两个方法</span></span><br><span class="line"><span class="comment"># 列表对象内置sort方法</span></span><br><span class="line">alist = [<span class="number">4</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">2</span>]</span><br><span class="line">alist.sort()</span><br><span class="line"><span class="comment"># [1, 2, 4, 7, 8]</span></span><br><span class="line"><span class="comment"># Python内置sorted函数</span></span><br><span class="line">alist = [<span class="number">4</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">7</span>,<span class="number">2</span>]</span><br><span class="line"><span class="built_in">sorted</span>(alist)</span><br><span class="line"><span class="comment"># [1, 2, 4, 7, 8]</span></span><br><span class="line"><span class="comment"># 注意，要保证元素之间可以两两比较，数值和字符串是不可比较的</span></span><br></pre></td></tr></table></figure>

<h4 id="元组"><a href="#元组" class="headerlink" title="元组"></a>元组</h4><p>元组与列表比较相似，但是元组是不可变的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.元组创建，两种方法</span></span><br><span class="line"><span class="comment"># 直接圆括号包住，也可以不加</span></span><br><span class="line">a=(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line">b=<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span></span><br><span class="line"><span class="comment"># 使用元组推导式</span></span><br><span class="line"><span class="comment"># 元组是不可变的，可以生成一个生成器对象</span></span><br><span class="line">ctuple = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建只有一个元素的元组时，要在元素后面加一个逗号 ，否则创建出来的为int对象</span></span><br><span class="line">ctuple = (<span class="number">1</span>)</span><br><span class="line"><span class="built_in">type</span>(ctuple)</span><br><span class="line"><span class="comment"># &lt;class &#x27;int&#x27;&gt;</span></span><br><span class="line">c = (<span class="number">1</span>,)</span><br><span class="line"><span class="built_in">type</span>(c)</span><br><span class="line"><span class="comment"># &lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">c = <span class="number">1</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建空元组</span></span><br><span class="line">a = <span class="built_in">tuple</span>()  <span class="comment"># 第一种方法</span></span><br><span class="line">b = ()  <span class="comment"># 第二种方法</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.查看元组</span></span><br><span class="line"><span class="comment"># 和查看数组一样，使用索引号</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.元组和列表之间的转换</span></span><br><span class="line"><span class="comment"># 很简单，调用函数即可</span></span><br><span class="line">a = (<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="built_in">list</span>(a)			<span class="comment">#&lt;class &#x27;list&#x27;&gt;</span></span><br><span class="line">b=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"><span class="built_in">tuple</span>(b)		<span class="comment">#&lt;class &#x27;tuple&#x27;&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="字典"><a href="#字典" class="headerlink" title="字典"></a>字典</h4><p>字典（英文名 dict），它是由一系列的键值（key-value）对组合而成的数据结构。<br>字典中的每个键都与一个值相关联，其中</p>
<ul>
<li>键，必须是可 hash 的值，如字符串，数值等</li>
<li>值，则可以是任意对象<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.创建字典，四种方式</span></span><br><span class="line"><span class="comment"># 先用dict()创建字典实例,再填充元素</span></span><br><span class="line">p = <span class="built_in">dict</span>(name=<span class="string">&quot;l&quot;</span>, age=<span class="number">27</span>）</span><br><span class="line"><span class="comment"># &#123;&#x27;name&#x27;: &#x27;l&#x27;, &#x27;age&#x27;: 27&#125;</span></span><br><span class="line"><span class="comment"># 第二种是直接使用&#123;&#125;来定义并填充元素</span></span><br><span class="line">p=&#123;name=<span class="string">&quot;l&quot;</span>,age=<span class="number">27</span>&#125;</span><br><span class="line"><span class="comment"># 第三种使用dict()构造函数可以直接从键值对序列里面创建字典</span></span><br><span class="line">info=[(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;l&#x27;</span>),(<span class="string">&#x27;age&#x27;</span>,<span class="number">27</span>)]</span><br><span class="line"><span class="built_in">dict</span>(info)</span><br><span class="line"><span class="comment"># 第四种字典推导式</span></span><br><span class="line">adict = &#123;x: x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> (<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>)&#125;	<span class="comment">#**是指数</span></span><br><span class="line"><span class="comment"># &#123;2: 4, 4: 16, 6: 36&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.增删查改</span></span><br><span class="line"><span class="comment"># 查看元素，查看key值</span></span><br><span class="line"><span class="comment"># 第一种方法直接查看dict[key],但是key不存在时会报错</span></span><br><span class="line">p[<span class="string">&quot;name&quot;</span>]</span><br><span class="line"><span class="comment"># 第二种方法可以避免，使用get方法，get(&quot;key&quot;,&quot;默认返回值&quot;)</span></span><br><span class="line">p.get(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;don&#x27;t have name&quot;</span>)</span><br><span class="line"><span class="comment"># 新增元素，直接dict[key]=value即可</span></span><br><span class="line">p[<span class="string">&quot;age&quot;</span>]=<span class="number">27</span></span><br><span class="line"><span class="comment"># 修改元素，同理直接dict[key]=newValue即可</span></span><br><span class="line">p[<span class="string">&quot;age&quot;</span>]=<span class="number">18</span></span><br><span class="line"><span class="comment"># 删除元素，两种方法</span></span><br><span class="line"><span class="comment"># pop函数，pop(key)</span></span><br><span class="line">p.pop(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"><span class="comment"># del语句</span></span><br><span class="line"><span class="keyword">del</span> p[<span class="string">&quot;name&quot;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 判断key是否在字典里</span></span><br><span class="line">name <span class="keyword">in</span> p			<span class="comment">#True</span></span><br><span class="line">gender <span class="keyword">not</span> <span class="keyword">in</span> p		<span class="comment">#False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#设置默认值</span></span><br><span class="line"><span class="keyword">if</span> <span class="string">&quot;gender&quot;</span> <span class="keyword">not</span> <span class="keyword">in</span> profile:</span><br><span class="line">    profile[<span class="string">&quot;gender&quot;</span>] = <span class="string">&quot;male&quot;</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">profile.setdefault(<span class="string">&quot;gender&quot;</span>, <span class="string">&quot;male&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><p>集合是一个无序的，元素不重复的序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.创建集合，两种方法</span></span><br><span class="line"><span class="comment"># 使用&#123;&#125;直接创建，列表用[]，元组用()</span></span><br><span class="line">a=&#123;<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>&#125;</span><br><span class="line"><span class="comment"># 使用set方法创建，当不接受参数时创建的是空集合，接受时，传入列表</span></span><br><span class="line">a=<span class="built_in">set</span>([<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>])</span><br><span class="line"><span class="comment"># 传入的列表里面有重复元素，保留第一个</span></span><br><span class="line">a=[<span class="string">&quot;aa&quot;</span>,<span class="string">&quot;cc&quot;</span>,<span class="string">&quot;bb&quot;</span>,<span class="string">&quot;cc&quot;</span>]</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line">b=<span class="built_in">set</span>(a)</span><br><span class="line"><span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment"># [&#x27;aa&#x27;, &#x27;cc&#x27;, &#x27;bb&#x27;, &#x27;cc&#x27;]</span></span><br><span class="line"><span class="comment"># &#123;&#x27;bb&#x27;, &#x27;cc&#x27;, &#x27;aa&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.增删查改</span></span><br><span class="line"><span class="comment"># 增加，两种方法</span></span><br><span class="line"><span class="comment"># add函数</span></span><br><span class="line">a.add(<span class="string">&quot;dd&quot;</span>)</span><br><span class="line"><span class="comment"># update函数,update 函数后可接集合，列表，元组，字典等</span></span><br><span class="line">a.update(&#123;<span class="string">&quot;a&quot;</span>&#125;)</span><br><span class="line">a.update([<span class="string">&quot;a&quot;</span>])</span><br><span class="line">a.update((<span class="string">&quot;a&quot;</span>,))</span><br><span class="line">a.update(&#123;<span class="string">&quot;a&quot;</span>:<span class="string">&quot;aa&quot;</span>&#125;)</span><br><span class="line"><span class="comment"># 删除元素</span></span><br><span class="line"><span class="comment"># remove，discard</span></span><br><span class="line">a.remove(<span class="string">&quot;aa&quot;</span>)		<span class="comment">#如果元素不存在会报错，discard函数，即使不存在也不会报错</span></span><br><span class="line">a.discard(<span class="string">&quot;aa&quot;</span>)</span><br><span class="line"><span class="comment"># pop，随机从集合删去一个元素，不加任何参数</span></span><br><span class="line">a.pop()</span><br><span class="line"><span class="comment"># clear，清空</span></span><br><span class="line">a.clear</span><br><span class="line"><span class="comment"># 集合无序，没有索引，所以无法查看，也就无法修改</span></span><br><span class="line"><span class="comment"># 可以用len查看长度</span></span><br><span class="line"><span class="built_in">len</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 集合运算</span></span><br><span class="line"><span class="comment"># 求合集union</span></span><br><span class="line">a=&#123;<span class="string">&quot;aa&quot;</span>,<span class="string">&quot;cc&quot;</span>&#125;</span><br><span class="line">b=&#123;<span class="string">&quot;bb&quot;</span>,<span class="string">&quot;cc&quot;</span>&#125;</span><br><span class="line">c=a.union(b)</span><br><span class="line"><span class="comment"># 这个函数不会改变原本集合</span></span><br><span class="line"><span class="comment"># 求合集也可以用|</span></span><br><span class="line">c=a|b</span><br><span class="line"><span class="comment"># 求差集difference函数</span></span><br><span class="line">a.difference(b)		<span class="comment">#表示元素在a中存在在b中不存在</span></span><br><span class="line"><span class="comment"># 也可以使用-</span></span><br><span class="line">a-b</span><br><span class="line"><span class="comment"># 求交集intersection函数</span></span><br><span class="line">a.intersection(b)</span><br><span class="line">a.intersection_update(b)	<span class="comment">#这个函数会原地更新在a上面</span></span><br><span class="line"><span class="comment"># 求交集也可以使用&amp;</span></span><br><span class="line">a&amp;b</span><br><span class="line"><span class="comment"># 求不重合集symmetric_difference，两个集合不重合元素之和</span></span><br><span class="line">a.symmetric_difference(b)</span><br><span class="line">a.symmetric_difference—_update(b)	<span class="comment">#同理，会原地更新在a上面</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 集合判断</span></span><br><span class="line"><span class="comment"># 判断是否含有</span></span><br><span class="line"><span class="string">&quot;aa&quot;</span> <span class="keyword">in</span> a		<span class="comment">#True</span></span><br><span class="line"><span class="comment"># 判断两个集合是否有相同元素</span></span><br><span class="line">a.isdisjoint(b)		<span class="comment">#有相同元素返回False，无则返回True</span></span><br><span class="line"><span class="comment"># 判断是否是某个集合的子集</span></span><br><span class="line">a.issubset(b)		<span class="comment">#判断a是否是b的子集</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h4><p>可以利用for循环的对象都叫可迭代对象Iterable<br>列表、元组、字典、字符串等都是可迭代对象。<br>另外，我们可以借助一些函数（比如collections.abc模块里面的Iterable类，用isinstance来判断），但是这种方法无法判断内部没有实现_iter_()方法的可迭代对象</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="built_in">isinstance</span>([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], Iterable) <span class="comment"># 列表</span></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>(&#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;王炳明&quot;</span>&#125;, Iterable) <span class="comment"># 字典</span></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>((<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>), Iterable) <span class="comment"># 元组</span></span><br><span class="line"><span class="comment"># True</span></span><br><span class="line"><span class="built_in">isinstance</span>(<span class="string">&quot;hello&quot;</span>, Iterable) <span class="comment"># 字符串</span></span><br><span class="line"><span class="comment"># True</span></span><br></pre></td></tr></table></figure>
<h5 id="可迭代协议"><a href="#可迭代协议" class="headerlink" title="可迭代协议"></a>可迭代协议</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种情况，类的内部实现了_iter_()方法，会返回一个迭代器实例，  </span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span>:</span><br><span class="line">    mylist = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">    <span class="comment"># 返回迭代器类的实例</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">iter</span>(self.mylist)</span><br><span class="line"><span class="comment"># 得到可迭代对象</span></span><br><span class="line">my_list = Array()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(my_list, Iterable)) <span class="comment"># True</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> my_list:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种情况，没有实现这个方法，python解释器可以通过_getitem_()方法获取到元素，也是一个可迭代对象</span></span><br><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterable</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span>:</span><br><span class="line">    mylist = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, item</span>):</span><br><span class="line">        <span class="keyword">return</span> self.mylist[item]</span><br><span class="line"><span class="comment"># 得到一个可迭代对象</span></span><br><span class="line">my_list = Array()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(my_list, Iterable)) <span class="comment"># False</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> my_list:</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<h5 id="使用next获取元素"><a href="#使用next获取元素" class="headerlink" title="使用next获取元素"></a>使用next获取元素</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">alist = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">gen = <span class="built_in">iter</span>(alist)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(gen))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(gen))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(gen))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(gen))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(gen))</span><br><span class="line"><span class="comment"># 每获取一次，就往后一位，全部获取完毕，就会抛出StopIteration</span></span><br></pre></td></tr></table></figure>
<h5 id="迭代器-1"><a href="#迭代器-1" class="headerlink" title="迭代器"></a>迭代器</h5><p>对比可迭代对象，迭代器的内部只是多了一个函数而已 – <strong>next</strong>()<br>迭代器，是在可迭代的基础上实现的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections.abc <span class="keyword">import</span> Iterator</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Array</span>:</span><br><span class="line">    index=<span class="number">0</span></span><br><span class="line">    mylist=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__iter__</span>(<span class="params">self</span>):		<span class="comment">#注意，这里是两个下划线</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__next__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> self.index&lt;<span class="built_in">len</span>(self.mylist):</span><br><span class="line">            value=self.mylist[self.index]</span><br><span class="line">            self.index += <span class="number">1</span></span><br><span class="line">            <span class="keyword">return</span> value</span><br><span class="line">        <span class="keyword">raise</span> StopIteration	<span class="comment">#异常抛出不用return，用raise</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">my_iterator = <span class="built_in">iter</span>(Array())</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">isinstance</span>(my_iterator, Iterator)) <span class="comment"># output: True</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iterator))  <span class="comment"># output: 0</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iterator))  <span class="comment"># output: 1</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iterator))  <span class="comment"># output: 2</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(my_iterator))  <span class="comment"># StopIteration</span></span><br></pre></td></tr></table></figure>
<h4 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h4><p>生成器是像迭代器那样可使用for循环来获取元素的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.创建生成器</span></span><br><span class="line"><span class="comment"># 使用推导式</span></span><br><span class="line"><span class="comment"># 之前解除了列表推导式，使用中括号</span></span><br><span class="line">a=[i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>)]</span><br><span class="line"><span class="comment"># 把中括号换成圆括号，返回的就会变成生成器而不是列表</span></span><br><span class="line">gen = (i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>))</span><br><span class="line"><span class="comment"># 第二种方法，使用yield创建</span></span><br><span class="line"><span class="comment"># 函数运行到 yield 后，函数的运行会暂停，并且会把 yield 后的值返回出去。</span></span><br><span class="line"><span class="comment"># 若 yield 没有接任何值，则返回 None</span></span><br><span class="line"><span class="comment"># yield 虽然返回了，但是函数并没有结束</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">generator_factory</span>(<span class="params">top=<span class="number">5</span></span>):</span><br><span class="line">    index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> index &lt; top:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;index 值为: &quot;</span> + <span class="built_in">str</span>(index))</span><br><span class="line">        index = index + <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> index</span><br><span class="line">    <span class="keyword">raise</span> StopIteration</span><br><span class="line">gen=generator_factory()</span><br><span class="line"><span class="built_in">print</span>(gen)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.使用生成器，从生成器中取元素</span></span><br><span class="line"><span class="comment"># 和迭代器一样，可以使用next和for来取元素</span></span><br><span class="line">gen=(x <span class="keyword">for</span> x <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>))</span><br><span class="line"><span class="built_in">next</span>(gen)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> gen</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第一步就是出发其运行，称为激活</span></span><br><span class="line"><span class="comment"># 生成器在其生命周期中，会有如下四个状态</span></span><br><span class="line"><span class="comment"># GEN_CREATED # 生成器已创建，还未被激活</span></span><br><span class="line"><span class="comment"># GEN_RUNNING # 解释器正在执行（只有在多线程应用中才能看到这个状态）</span></span><br><span class="line"><span class="comment"># GEN_SUSPENDED # 在 yield 表达式处暂停</span></span><br><span class="line"><span class="comment"># GEN_CLOSED # 生成器执行结束</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.生成器异常</span></span><br><span class="line"><span class="comment"># 和迭代器一样，raise抛出</span></span><br><span class="line"><span class="comment"># 生成器可以看作一种特殊的迭代器</span></span><br></pre></td></tr></table></figure>
<h2 id="控制流程"><a href="#控制流程" class="headerlink" title="控制流程"></a>控制流程</h2><h4 id="判断条件"><a href="#判断条件" class="headerlink" title="判断条件"></a>判断条件</h4><p>假值 ：None、空列表、空集合、空字典，空元组、空字符串、0、False 等<br>真值 ：非空列表、非空集合、非空字典，非空元组、非空字符串、非 0 数值、True 等</p>
<h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单条件</span></span><br><span class="line"><span class="keyword">if</span> 判断条件：</span><br><span class="line">    执行语句……</span><br><span class="line"><span class="keyword">else</span>：</span><br><span class="line">    执行语句……</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多条件</span></span><br><span class="line"><span class="keyword">if</span> 判断条件<span class="number">1</span>：</span><br><span class="line">    执行语句……</span><br><span class="line"><span class="keyword">elif</span> 判断条件<span class="number">2</span>：</span><br><span class="line">    执行语句……</span><br><span class="line"><span class="keyword">elif</span> 判断条件<span class="number">3</span>：</span><br><span class="line">    执行语句……</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    执行语句……</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多条件组合</span></span><br><span class="line"><span class="comment"># 如果一个 if 条件需要同时满足多个条件，那么可以使用 and 或者 &amp;</span></span><br><span class="line"><span class="comment"># 如果一个 if 条件只需要满足多个条件的其中一个，那么可以使用 or 或者 |</span></span><br><span class="line"><span class="comment"># 如果一个 if 要求不满足某个条件，那么可以使用 not 或者 !</span></span><br><span class="line"><span class="comment"># 需要同时满足条件 A 和条件 B</span></span><br><span class="line"><span class="keyword">if</span> 条件A <span class="keyword">and</span> 条件B:</span><br><span class="line">    ...</span><br><span class="line"><span class="comment"># 只需要满足条件A或者条件B即可</span></span><br><span class="line"><span class="keyword">if</span> 条件A <span class="keyword">or</span> 条件B:</span><br><span class="line">    ...</span><br><span class="line"><span class="comment"># 要求不满足条件A</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> 条件A:</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line"><span class="keyword">for</span> 元素 <span class="keyword">in</span> 序列对象:</span><br><span class="line">   代码块</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带索引循环，循环中也可以把索引取出来，使用enumerate函数</span></span><br><span class="line">phones = [<span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Huawei&quot;</span>, <span class="string">&quot;Xiaomi&quot;</span>]</span><br><span class="line"><span class="keyword">for</span> index,phone <span class="keyword">in</span> <span class="built_in">enumerate</span>(phones):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;我的第&#123;&#125;把手机是&#123;&#125;&quot;</span>.<span class="built_in">format</span>(index+<span class="number">1</span>, phone))</span><br><span class="line"></span><br><span class="line"><span class="comment"># break中断，continue直接进入下一循环</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># for-else 循环</span></span><br><span class="line"><span class="comment"># for后面加入else，在for正常执行完以后会进入else(正常执行就是不被break打断的)</span></span><br><span class="line"><span class="comment"># 可以看作for循环后面附加的一轮循环，还是属于这一层，使用break会跳出</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]:</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;当前的数是 &quot;</span> + <span class="built_in">str</span>(i))</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;循环非常正常&quot;</span>)</span><br><span class="line"><span class="comment"># 改为continue就不会进入else</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语句</span></span><br><span class="line"><span class="keyword">while</span> 判断条件：</span><br><span class="line">    执行语句</span><br><span class="line"></span><br><span class="line"><span class="comment"># 死循环：while 后面的条件一直满足且循环体内一直没有 break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># while-else，和for-else一样</span></span><br></pre></td></tr></table></figure>
<h4 id="推导式"><a href="#推导式" class="headerlink" title="推导式"></a>推导式</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.列表推导式</span></span><br><span class="line"><span class="comment"># 基本格式</span></span><br><span class="line">new_list = [expression for_loop_expression <span class="keyword">if</span> condition]</span><br><span class="line">old_list=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">new_list=[x <span class="keyword">for</span> x <span class="keyword">in</span> old_list <span class="keyword">if</span> x%<span class="number">2</span>==<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(new_list)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.集合推导式，和列表一样，只不过换成了&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.字典推导式</span></span><br><span class="line"><span class="comment"># 基本格式</span></span><br><span class="line">new_dict =&#123; key_expr: value_expr for_loop_expression <span class="keyword">if</span> condition &#125;</span><br><span class="line">info=&#123;</span><br><span class="line">    <span class="string">&quot;Jack&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;chinese&quot;</span>: <span class="number">87</span>,</span><br><span class="line">        <span class="string">&quot;math&quot;</span>: <span class="number">92</span>,</span><br><span class="line">        <span class="string">&quot;english&quot;</span>: <span class="number">78</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;Tom&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;chinese&quot;</span>: <span class="number">92</span>,</span><br><span class="line">        <span class="string">&quot;math&quot;</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">&quot;english&quot;</span>: <span class="number">89</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">info[<span class="string">&quot;ldh&quot;</span>]=&#123;<span class="string">&quot;chinese&quot;</span>:<span class="number">100</span>&#125;</span><br><span class="line"><span class="comment"># print(info)</span></span><br><span class="line">new_info=&#123;name:sub <span class="keyword">for</span> name,sub <span class="keyword">in</span> info.items() <span class="keyword">if</span> sub[<span class="string">&quot;chinese&quot;</span>]&gt;<span class="number">90</span> &#125;</span><br><span class="line"><span class="built_in">print</span>(new_info)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.生成器推导式：和列表推导式一样，只是[]换成了() </span></span><br><span class="line"><span class="comment"># 另外，列表推导式生成的是列表，生成器推导式生成的是生成器</span></span><br><span class="line">old_list = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">new_list = (item <span class="keyword">for</span> item <span class="keyword">in</span> old_list <span class="keyword">if</span> item % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.嵌套推导式</span></span><br><span class="line"><span class="comment"># 打印九九乘法表</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;\n&#x27;</span>.join([<span class="string">&#x27; &#x27;</span>.join([<span class="string">&#x27;%2d *%2d = %2d&#x27;</span> % (col, row, col * row) <span class="keyword">for</span> col <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, row + <span class="number">1</span>)]) <span class="keyword">for</span> row <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>)]))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这里额外说一下join函数</span></span><br><span class="line"><span class="comment"># join() 方法获取可迭代对象中的所有项目，并将它们连接为一个字符串。</span></span><br><span class="line"><span class="comment"># 必须将字符串指定为分隔符。</span></span><br><span class="line">string.join(iterable)</span><br></pre></td></tr></table></figure>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="普通函数创建与使用"><a href="#普通函数创建与使用" class="headerlink" title="普通函数创建与使用"></a>普通函数创建与使用</h3><h4 id="函数创建"><a href="#函数创建" class="headerlink" title="函数创建"></a>函数创建</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.函数的创建</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">函数名</span>(<span class="params">参数</span>):</span><br><span class="line">    <span class="comment"># 内部代码</span></span><br><span class="line">    <span class="keyword">return</span> 表达式</span><br></pre></td></tr></table></figure>
<p>在定义函数的过程中，需要注意以下几点：</p>
<ul>
<li>函数代码块以def关键词开头，一个空格之后接函数标识符名称和圆括号()，再接个冒号。</li>
<li>任何传入的参数必须放在圆括号中间。</li>
<li>函数的第一行语句后可以选择性地使用文档字符串—用于存放函数说明。</li>
<li>函数内容以冒号起始，并且缩进。</li>
<li>使用return，返回值给调用者，并结束函数。return 关键并不是必须要加，可根据实际需要决定是否要写，若不写的话，默认返回None。</li>
<li>return语句依然在函数体内部，不能回退缩进。直到函数的所有代码写完，才回退缩进，表示函数体结束。</li>
</ul>
<h4 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_average</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    计算平均值</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    result = (a + b)/<span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">average = get_average(<span class="number">2</span>, <span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(average)  <span class="comment"># output: 4</span></span><br></pre></td></tr></table></figure>
<h4 id="函数返回"><a href="#函数返回" class="headerlink" title="函数返回"></a>函数返回</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 函数返回可以有不同的类型</span></span><br><span class="line"><span class="comment"># 任意类型字符串，数值，列表，字典等等都可以</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo_func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line"><span class="comment"># 可以为一个表达式</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_average</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> (a + b)/<span class="number">2</span></span><br><span class="line"><span class="comment"># 可以返回函数本身（递归）</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fact</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n==<span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> n * fact(n - <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 返回多个值</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo_func</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>,<span class="number">2.3</span></span><br><span class="line"><span class="comment"># 返回其他函数(可以实现装饰器)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decorator</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kw</span>):</span><br><span class="line">        <span class="keyword">return</span> func()</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br></pre></td></tr></table></figure>
<h3 id="函数参数"><a href="#函数参数" class="headerlink" title="函数参数"></a>函数参数</h3><h4 id="参数分类"><a href="#参数分类" class="headerlink" title="参数分类"></a>参数分类</h4><h5 id="从定义分类：必选参数，可选参数"><a href="#从定义分类：必选参数，可选参数" class="headerlink" title="从定义分类：必选参数，可选参数"></a>从定义分类：必选参数，可选参数</h5><p>必选参数：调用函数时必须要指定的参数，在定义时没有等号<br>可选参数：也叫默认参数，调用函数时可以指定也可以不指定，不指定就默认的参数值来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a,b,c=<span class="number">0</span>, d=<span class="number">1</span></span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment"># ab必选，cd可选</span></span><br></pre></td></tr></table></figure>
<h5 id="从函数调用来分类：关键字参数，位置参数"><a href="#从函数调用来分类：关键字参数，位置参数" class="headerlink" title="从函数调用来分类：关键字参数，位置参数"></a>从函数调用来分类：关键字参数，位置参数</h5><p>关键字参数：调用时，使用 key&#x3D;value 形式传参的，这样传递参数就可以不按定义顺序来。<br>位置参数：调用时，不使用关键字参数的 key-value 形式传参，这样传参要注意按照函数定义时参数的顺序来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">a,b,c=<span class="number">0</span>, d=<span class="number">1</span></span>):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 关键字参数传参方法</span></span><br><span class="line">func(a=<span class="number">10</span>, c=<span class="number">30</span>, b=<span class="number">20</span>, d=<span class="number">40</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 位置参数传参方法</span></span><br><span class="line">func(<span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>)</span><br></pre></td></tr></table></figure>
<h5 id="可变参数：-args-和-kw"><a href="#可变参数：-args-和-kw" class="headerlink" title="可变参数：*args 和 **kw"></a>可变参数：*args 和 **kw</h5><p>可变参数，意思就是参数的个数可变，传参时不能指定参数名，通常用*args和**kw表示<br>*args：接收到的所有按照位置参数方式传递进来的参数，是一个元组类型<br>**kw ：接收到的所有按照关键字参数方式传递进来的参数，是一个字典类型</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">func</span>(<span class="params">*args, **kw</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">    <span class="built_in">print</span>(kw)</span><br><span class="line"></span><br><span class="line">func(<span class="number">10</span>, <span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,a=<span class="number">10</span>)</span><br><span class="line"><span class="comment"># (10, 20, 30, 40)</span></span><br><span class="line"><span class="comment"># &#123;&#x27;a&#x27;: 10&#125;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><p>在定义时，必选参数一定要在可选参数的前面，不然运行时会报错</p>
</li>
<li><p>可变位置参数可以放在必选参数前面，但是在调用时，必选参数必须要指定参数名来传入，否则会报错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">demo_func</span>(<span class="params">*args, b</span>):</span><br><span class="line">    <span class="built_in">print</span>(args)</span><br><span class="line">    <span class="built_in">print</span>(b)</span><br><span class="line"><span class="comment"># demo_func(1, 2, 100)	#会报错</span></span><br><span class="line"><span class="comment"># TypeError: demo_func() missing 1 required keyword-only argument: &#x27;b&#x27;</span></span><br><span class="line">demo_func(<span class="number">1</span>, <span class="number">2</span>, b=<span class="number">100</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>可变关键字参数则不一样，可变关键字参数一定得放在最后</p>
</li>
<li><p>由此，四种参数类型可以在一个函数里面同时出现，但是一定要注意顺序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">demo_func</span>(<span class="params">arg1, arg2=<span class="number">10</span>, *args, **kw</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;arg1: &quot;</span>, arg1)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;arg2: &quot;</span>, arg2)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;args: &quot;</span>, args)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;kw: &quot;</span>, kw)</span><br><span class="line">demo_func(<span class="number">1</span>,<span class="number">12</span>, <span class="number">100</span>, <span class="number">200</span>, d=<span class="number">1000</span>, e=<span class="number">2000</span>)</span><br><span class="line"><span class="comment"># 必选参数一定要在可选参数的前面</span></span><br><span class="line"><span class="comment"># 可变位置参数一定要在可变关键字参数前面</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用单独的*。这个叫做命名关键字参数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在定义函数时，使用这个，可以限定后面的参数只能使用关键字传参，否则会报错</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">demo_func</span>(<span class="params">a, b, *, c</span>):</span><br><span class="line">    <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="built_in">print</span>(b)</span><br><span class="line">    <span class="built_in">print</span>(c)</span><br><span class="line"><span class="comment"># 以下这种方法调用会报错</span></span><br><span class="line"><span class="comment"># demo_func(1, 2, 3)</span></span><br><span class="line">demo_func(<span class="number">1</span>, <span class="number">2</span>, c=<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数传参传递时实际对象的地址，函数内部改变也会影响外部</p>
</li>
</ol>
<h3 id="匿名函数的使用"><a href="#匿名函数的使用" class="headerlink" title="匿名函数的使用"></a>匿名函数的使用</h3><p>匿名函数就是指一类无需定义函数名的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用lambda定义</span></span><br><span class="line">(<span class="keyword">lambda</span> 参数<span class="number">1</span>,参数<span class="number">2</span>: 返回值)(实际传参)</span><br><span class="line"><span class="comment"># 例，求和函数</span></span><br><span class="line"><span class="comment"># 常规函数：</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mySum</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> x+y</span><br><span class="line">mySum(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment"># 匿名函数</span></span><br><span class="line">(<span class="keyword">lambda</span> x,y: x+y)(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 具体应用：</span></span><br><span class="line"><span class="comment"># if/else</span></span><br><span class="line">( <span class="keyword">lambda</span> x, y: x <span class="keyword">if</span> x &lt; y <span class="keyword">else</span> y )( <span class="number">1</span>, <span class="number">2</span> )</span><br><span class="line"><span class="comment"># 嵌套函数</span></span><br><span class="line">( <span class="keyword">lambda</span> x: ( <span class="keyword">lambda</span> y: ( <span class="keyword">lambda</span> z: x + y + z  )( <span class="number">1</span> ) )( <span class="number">2</span> ) )( <span class="number">3</span> )</span><br><span class="line"><span class="comment"># 递归函数</span></span><br><span class="line">func = <span class="keyword">lambda</span> n:<span class="number">1</span> <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">else</span> n * func(n-<span class="number">1</span>)</span><br><span class="line">f = <span class="keyword">lambda</span> func, n: <span class="number">1</span> <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">else</span> n * func( func, n - <span class="number">1</span> )</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>这种匿名函数是一个表达式，而不是一个语句。</p>
<h3 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h3><h5 id="map函数"><a href="#map函数" class="headerlink" title="map函数"></a>map函数</h5><p>map函数接受两个参数，一个是函数对象（匿名函数也可），一个是序列，这个函数的作用就是把序列里面的元素逐个作为参数传入函数中，返回的是经过函数处理的新的序列</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>(<span class="keyword">lambda</span> x: x*<span class="number">2</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="comment"># [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure>
<h5 id="filter函数"><a href="#filter函数" class="headerlink" title="filter函数"></a>filter函数</h5><p>和map一样，接受两个参数，一个函数对象，它会遍历后面序列中每一个元素，并将其做为参数传入lambda表达式中，当表达式返回 True，则元素会被保留下来，当表达式返回 False ，则元素会被丢弃。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x&gt;<span class="number">2</span></span><br><span class="line">b=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">a=<span class="built_in">filter</span>(f,b)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(a))</span><br></pre></td></tr></table></figure>
<h5 id="reduce函数"><a href="#reduce函数" class="headerlink" title="reduce函数"></a>reduce函数</h5><p>它的作用是先对序列中的第 1、2 个元素进行操作，得到的结果再与第三个数据用函数运算，将其得到的结果再与第四个元素进行运算，以此类推下去直到后面没有元素了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line">a=reduce(<span class="keyword">lambda</span> x,y: x+y, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure>
<h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><ol>
<li>map 和 filter 函数返回的都不再是一个列表，而是一个迭代器对象</li>
<li>reduce 不可以直接调用，而是要先导入才能使用，返回的是处理以后的数据</li>
</ol>
<h3 id="反射函数"><a href="#反射函数" class="headerlink" title="反射函数"></a>反射函数</h3><p><a target="_blank" rel="noopener" href="https://python.iswbm.com/c05/c05_05.html">https://python.iswbm.com/c05/c05_05.html</a><br>有点玛瑙，感觉吃不掉，先收藏着</p>
<h3 id="偏函数"><a href="#偏函数" class="headerlink" title="偏函数"></a>偏函数</h3><p>偏函数（Partial Function），可以将某个函数的常用参数进行固定，避免每次调用时都要指定。使用前要先导入functools.partial，利用其新建一个函数，这个函数的n固定为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">power</span>(<span class="params">x, n</span>):</span><br><span class="line">    s = <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        n = n - <span class="number">1</span></span><br><span class="line">        s = s * x</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">power(<span class="number">2</span>, <span class="number">2</span>)</span><br><span class="line">power(<span class="number">3</span>, <span class="number">2</span>)</span><br><span class="line"><span class="comment"># 实际计算中，大部分都是计算平方，总是传两个参数很烦，于是使用偏函数，固定一个平方值</span></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> partial</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">power</span>(<span class="params">x, n</span>):</span><br><span class="line">    s = <span class="number">1</span> </span><br><span class="line">    <span class="keyword">while</span> n &gt; <span class="number">0</span>:</span><br><span class="line">        n = n - <span class="number">1</span></span><br><span class="line">        s = s * x</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line">power_2=partial(power, n=<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(power_2(<span class="number">2</span>))</span><br><span class="line"><span class="comment"># 4</span></span><br><span class="line"><span class="comment"># 不需要额外写一个平方函数，也免去了这些参数设置</span></span><br></pre></td></tr></table></figure>
<h3 id="泛型函数singledispatch"><a href="#泛型函数singledispatch" class="headerlink" title="泛型函数singledispatch"></a>泛型函数singledispatch</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> singledispatch</span><br><span class="line">a=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="meta">@singledispatch</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fun</span>(<span class="params">*arg</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;error&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@fun.register</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_</span>(<span class="params">x:<span class="built_in">int</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;int&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@fun.register</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_</span>(<span class="params">x:<span class="built_in">str</span></span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;str&quot;</span>)</span><br><span class="line"></span><br><span class="line">fun(<span class="number">1</span>)</span><br><span class="line">fun(<span class="string">&quot;1&quot;</span>)</span><br></pre></td></tr></table></figure>
<h3 id="变量作用域"><a href="#变量作用域" class="headerlink" title="变量作用域"></a>变量作用域</h3><h5 id="python作用域有以下四种"><a href="#python作用域有以下四种" class="headerlink" title="python作用域有以下四种"></a>python作用域有以下四种</h5><ul>
<li>L （Local） 局部作用域</li>
<li>E （Enclosing） 闭包函数外的函数中</li>
<li>G （Global） 全局作用域</li>
<li>B （Built-in） 内建作用域</li>
</ul>
<p>变量&#x2F;函数 的查找顺序： L –&gt; E –&gt; G –&gt;B</p>
<h5 id="影响变量-函数划分的："><a href="#影响变量-函数划分的：" class="headerlink" title="影响变量&#x2F;函数划分的："></a>影响变量&#x2F;函数划分的：</h5><ul>
<li>函数：def 或 lambda</li>
<li>类：class</li>
<li>关键字：global noglobal</li>
<li>文件：*py</li>
<li>推导式：[],{},()等，仅限Py3.x中，Py2.x会出现变量泄露。</li>
</ul>
<h5 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h5><p>在一个外函数中定义了一个内函数，内函数里运用了外函数的临时变量，并且外函数的返回值是内函数的引用。这样就构成了一个闭包。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    name=<span class="string">&quot;ldh&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">    <span class="keyword">return</span> f2()</span><br><span class="line">f1()</span><br><span class="line"><span class="comment"># ldh</span></span><br><span class="line"><span class="comment"># 也可以这么写</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    name=<span class="string">&quot;ldh&quot;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">        <span class="built_in">print</span>(name)</span><br><span class="line">    <span class="keyword">return</span> f2</span><br><span class="line">f1()()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="改变作用域"><a href="#改变作用域" class="headerlink" title="改变作用域"></a>改变作用域</h5><p>变量的作用域，与其定义（或赋值）的位置有关，但不是绝对相关。 因为我们可以在某种程度上去改变向上的作用范围。</p>
<ul>
<li>关键字：global 将 局部变量 变为全局变量</li>
<li>关键字：nonlocal 可以在闭包函数中，引用并使用闭包外部函数的变量（非全局的噢）</li>
</ul>
<p>内函数可以引用外函数的变量，但是，没有办法改变，不能出现在赋值号的左边，否则会报错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    age=<span class="number">10</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">        <span class="comment"># age+=1	报错</span></span><br><span class="line">        a=age*<span class="number">2</span></span><br><span class="line">        <span class="comment"># age=a-1	报错</span></span><br><span class="line">        <span class="built_in">print</span>(a)</span><br><span class="line">    <span class="keyword">return</span> f2()</span><br><span class="line">f1()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 加上nonlocal修饰，就可以对其进行操作</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">f1</span>():</span><br><span class="line">    age=<span class="number">10</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">f2</span>():</span><br><span class="line">        <span class="keyword">nonlocal</span> age</span><br><span class="line">        age+=<span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(age)</span><br><span class="line">    f2()</span><br><span class="line">    <span class="built_in">print</span>(age)</span><br><span class="line">    <span class="keyword">return</span> f2()</span><br><span class="line">f1()</span><br><span class="line"><span class="comment"># 11，11，12</span></span><br><span class="line"><span class="comment"># 显然可以看出加入nonlocal修饰词，可以使内部函数不仅可以访问，还可以改变外部函数变量值</span></span><br></pre></td></tr></table></figure>
<h5 id="变量集合"><a href="#变量集合" class="headerlink" title="变量集合"></a>变量集合</h5><p>在Python中，有两个内建函数</p>
<ul>
<li>globals() ：以dict的方式存储所有全局变量</li>
<li>locals()：	  以dict的方式存储所有局部变量<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">foo</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;I am a func&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bar</span>():</span><br><span class="line">    foo=<span class="string">&quot;I am a string&quot;</span></span><br><span class="line">    foo_dup = <span class="built_in">globals</span>().get(<span class="string">&quot;foo&quot;</span>)</span><br><span class="line">    foo_dup()</span><br><span class="line"></span><br><span class="line">bar()</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># I am a func</span></span><br><span class="line">other = <span class="string">&quot;test&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">foobar</span>():</span><br><span class="line">    name = <span class="string">&quot;MING&quot;</span></span><br><span class="line">    gender = <span class="string">&quot;male&quot;</span></span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">locals</span>().items():</span><br><span class="line">        <span class="built_in">print</span>(key, <span class="string">&quot;=&quot;</span>, value)</span><br><span class="line"></span><br><span class="line">foobar()</span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line"><span class="comment"># name = MING</span></span><br><span class="line"><span class="comment"># gender = male</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="上下文管理器"><a href="#上下文管理器" class="headerlink" title="上下文管理器"></a>上下文管理器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取文件时</span></span><br><span class="line">file=<span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(file.readlines())  <span class="comment"># 读取并打印</span></span><br><span class="line">file.close()  <span class="comment"># 关闭文件句柄</span></span><br><span class="line"><span class="comment"># 但是常常会忘记关闭文件句柄</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以使用with关键词，可以读取结束后，自动关闭句柄</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;test.txt&#x27;</span>) <span class="keyword">as</span> file:</span><br><span class="line">    <span class="built_in">print</span>(file.readlines())</span><br></pre></td></tr></table></figure>
<p>以此引入上下文管理器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line"><span class="keyword">with</span> EXPR <span class="keyword">as</span> VAR:</span><br><span class="line">    代码块</span><br></pre></td></tr></table></figure>
<p>从开始的例子看出</p>
<ol>
<li>上下文表达式：with open(‘test.txt’) as file:</li>
<li>上下文管理器：open(‘test.txt’)</li>
<li>file 不是上下文管理器，应该是资源对象。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实现上下文管理器</span></span><br><span class="line"><span class="comment"># 简单点说，就是在一个类里面定义enter和exit方法，这个类的实例就是一个上下文管理器</span></span><br><span class="line"><span class="comment"># 在编写代码时，可以将资源的连接或者获取放在__enter__中，而将资源的关闭写在__exit__ 中。</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Resource</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===connect to resource===&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===close resource connection===&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operate</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===in operation===&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Resource() <span class="keyword">as</span> res:</span><br><span class="line">    res.operate()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看日志</span></span><br><span class="line">===connect to resource===</span><br><span class="line">===<span class="keyword">in</span> operation===</span><br><span class="line">===close resource connection===</span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="为什么使用它"><a href="#为什么使用它" class="headerlink" title="为什么使用它"></a>为什么使用它</h5><ol>
<li>更加优雅，操作（创建&#x2F;获取&#x2F;释放）资源，如文件操作、数据库连接；</li>
<li>更加优雅，处理异常<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Resource</span>():</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===connect to resource===&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===close resource connection===&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">operate</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="number">1</span>/<span class="number">0</span>					<span class="comment">#常规肯定会报错，但是这里不会</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> Resource() <span class="keyword">as</span> res:</span><br><span class="line">    res.operate()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这就是上下文管理协议的一个强大之处，异常可以在__exit__ 进行捕获并由你自己决定如何处理，是抛出呢还是在这里就解决了。</span></span><br></pre></td></tr></table></figure>
在 写__exit__ 函数时，需要注意的事，它必须要有这三个参数：</li>
</ol>
<ul>
<li>exc_type：异常类型</li>
<li>exc_val：异常值</li>
<li>exc_tb：异常的错误栈信息</li>
</ul>
<p>当主逻辑代码没有报异常时，这三个参数将都为None。</p>
<h5 id="contextlib"><a href="#contextlib" class="headerlink" title="contextlib"></a>contextlib</h5><p>按照python提供的装饰器的代码协议来实现函数内容，就可以将这个函数对象变成一个上下文管理器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 打开文件关闭文件</span></span><br><span class="line"><span class="keyword">import</span> contextlib</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextlib.contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">open_func</span>(<span class="params">file_name</span>):</span><br><span class="line">    <span class="comment"># __enter__方法</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;open file:&#x27;</span>, file_name, <span class="string">&#x27;in __enter__&#x27;</span>)</span><br><span class="line">    file_handler = <span class="built_in">open</span>(file_name, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 【重点】：yield</span></span><br><span class="line">    <span class="keyword">yield</span> file_handler</span><br><span class="line"></span><br><span class="line">    <span class="comment"># __exit__方法</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;close file:&#x27;</span>, file_name, <span class="string">&#x27;in __exit__&#x27;</span>)</span><br><span class="line">    file_handler.close()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"><span class="comment"># 文件地址使用双反斜杠或者一个正斜杠</span></span><br><span class="line"><span class="keyword">with</span> open_func(<span class="string">&#x27;C:\\Users\\DELL\\Desktop\\1.txt&#x27;</span>) <span class="keyword">as</span> file_in:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file_in:</span><br><span class="line">        <span class="built_in">print</span>(line)</span><br></pre></td></tr></table></figure>
<p>文件地址斜杠使用不正确，会报错：<br>SyntaxError: (unicode error) ‘unicodeescape’ codec can’t decode bytes in position 2-3: truncated \UXXXXXXXX escape<br>以上借助contextlib实现函数为上下文管理器，接下来，我们修改一下，让他可以处理异常</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mport contextlib</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextlib.contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">open_func</span>(<span class="params">file_name</span>):</span><br><span class="line">    <span class="comment"># __enter__方法</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;open file:&#x27;</span>, file_name, <span class="string">&#x27;in __enter__&#x27;</span>)</span><br><span class="line">    file_handler = <span class="built_in">open</span>(file_name, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">yield</span> file_handler</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> exc:</span><br><span class="line">        <span class="comment"># deal with exception</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;the exception was thrown&#x27;</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;close file:&#x27;</span>, file_name, <span class="string">&#x27;in __exit__&#x27;</span>)</span><br><span class="line">        file_handler.close()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open_func(<span class="string">&#x27;/Users/MING/mytest.txt&#x27;</span>) <span class="keyword">as</span> file_in:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file_in:</span><br><span class="line">        <span class="number">1</span>/<span class="number">0</span></span><br><span class="line">        <span class="built_in">print</span>(line)</span><br></pre></td></tr></table></figure>
<p>我个人的理解，函数本身是可以实现功能的，但是有限，就比如，open，只能开，不能关，关要使用另外一个函数。然而，上下管理器，就相当于一个结合器，集合这些功能，把他们以一个一个功能为单位的函数组合成一个一个以事件为单位。组合函数，实现事件要求</p>
<h3 id="装饰器"><a href="#装饰器" class="headerlink" title="装饰器"></a>装饰器</h3><h5 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h5><p>装饰器本质也是一个python函数，它可以在其他函数在不需要做任何代码变动的前提，给其他函数增添额外功能，其返回值也是一个函数对象</p>
<h5 id="使用方法："><a href="#使用方法：" class="headerlink" title="使用方法："></a>使用方法：</h5><ol>
<li>先定义一个装饰器</li>
<li>再定义业务函数或者类</li>
<li>最后把装饰器扣在函数上</li>
</ol>
<h5 id="一个简单的装饰器"><a href="#一个简单的装饰器" class="headerlink" title="一个简单的装饰器"></a>一个简单的装饰器</h5><p>功能：函数执行开始与结束都记录日志</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">logger</span>(<span class="params">func</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kw</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;prepare for execution &#123;&#125;()&#x27;</span>.<span class="built_in">format</span>(func.__name__))</span><br><span class="line">        <span class="comment"># 真正执行的是这行。</span></span><br><span class="line">        func(*args, **kw)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;all right&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@logger</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;&#123;&#125; + &#123;&#125; = &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(x, y, x+y))</span><br><span class="line"></span><br><span class="line">add(<span class="number">10</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<h5 id="带参数装饰器"><a href="#带参数装饰器" class="headerlink" title="带参数装饰器"></a>带参数装饰器</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">say_hello</span>(<span class="params">contry</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">func</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">deco</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="keyword">if</span> contry == <span class="string">&quot;china&quot;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;你好!&quot;</span>)</span><br><span class="line">            <span class="keyword">elif</span> contry == <span class="string">&quot;america&quot;</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&#x27;hello.&#x27;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">            <span class="comment"># 真正执行函数的地方</span></span><br><span class="line">            func(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> deco</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="comment"># 小明，中国人</span></span><br><span class="line"><span class="meta">@say_hello(<span class="params"><span class="string">&quot;china&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">xiaoming</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># jack，美国人</span></span><br><span class="line"><span class="meta">@say_hello(<span class="params"><span class="string">&quot;america&quot;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jack</span>():</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h5 id="不带参数的类装饰器"><a href="#不带参数的类装饰器" class="headerlink" title="不带参数的类装饰器"></a>不带参数的类装饰器</h5><p>基于类装饰器的实现，必须实现 <strong>call</strong> 和 __init__两个内置函数。<br><strong>init</strong> ：接收被装饰函数 <strong>call</strong> ：实现装饰逻辑。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">Any</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">logger</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,func</span>) -&gt; <span class="literal">None</span>:</span><br><span class="line">        self.func=func</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args: <span class="type">Any</span>, **kwds: <span class="type">Any</span></span>) -&gt; <span class="type">Any</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;The function &#123;&#125; is running&quot;</span>.<span class="built_in">format</span>(self.func.__name__))</span><br><span class="line">        <span class="keyword">return</span> self.func(*args,**kwds)</span><br><span class="line">    </span><br><span class="line"><span class="meta">@logger</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">ss</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;say&#123;&#125;&quot;</span>.<span class="built_in">format</span>(ss))</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">say(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment"># The function say is running</span></span><br><span class="line"><span class="comment"># sayhello</span></span><br></pre></td></tr></table></figure>
<h5 id="带参数的类装饰器"><a href="#带参数的类装饰器" class="headerlink" title="带参数的类装饰器"></a>带参数的类装饰器</h5><p>带参数和不带参数的类装饰器有很大的不同。<br><strong>init</strong> ：不再接收被装饰函数，而是接收传入参数。 <strong>call</strong> ：接收被装饰函数，实现装饰逻辑。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实现不同级别的日志</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">logger</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, level=<span class="string">&#x27;INFO&#x27;</span></span>):</span><br><span class="line">        self.level = level</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, func</span>): <span class="comment"># 接受函数</span></span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;[&#123;level&#125;]: the function &#123;func&#125;() is running...&quot;</span>\</span><br><span class="line">                .<span class="built_in">format</span>(level=self.level, func=func.__name__))</span><br><span class="line">            func(*args, **kwargs)</span><br><span class="line">        <span class="keyword">return</span> wrapper  <span class="comment">#返回函数</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@logger(<span class="params">level=<span class="string">&#x27;WARNING&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">something</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;say &#123;&#125;!&quot;</span>.<span class="built_in">format</span>(something))</span><br><span class="line"></span><br><span class="line">say(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment"># [WARNING]: the function say() is running...</span></span><br><span class="line"><span class="comment"># say hello!</span></span><br></pre></td></tr></table></figure>
<h5 id="使用偏函数与类实现装饰器"><a href="#使用偏函数与类实现装饰器" class="headerlink" title="使用偏函数与类实现装饰器"></a>使用偏函数与类实现装饰器</h5><p>绝大多数装饰器都是基于函数和闭包实现的，但这并非制造装饰器的唯一方式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> functools</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">DelayFunc</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,  duration, func</span>):</span><br><span class="line">        self.duration = duration</span><br><span class="line">        self.func = func</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;Wait for <span class="subst">&#123;self.duration&#125;</span> seconds...&#x27;</span>)</span><br><span class="line">        time.sleep(self.duration)</span><br><span class="line">        <span class="keyword">return</span> self.func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eager_call</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;Call without delay&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> self.func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">delay</span>(<span class="params">duration</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    装饰器：推迟某个函数的执行。</span></span><br><span class="line"><span class="string">    同时提供 .eager_call 方法立即执行</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 此处为了避免定义额外函数，</span></span><br><span class="line">    <span class="comment"># 直接使用 functools.partial 帮助构造 DelayFunc 实例</span></span><br><span class="line">    <span class="keyword">return</span> functools.partial(DelayFunc, duration)</span><br><span class="line"><span class="meta">@delay(<span class="params">duration=<span class="number">2</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">a, b</span>):</span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(add)</span><br><span class="line"><span class="built_in">print</span>(add(<span class="number">3</span>,<span class="number">5</span>))</span><br><span class="line"><span class="built_in">print</span>(add.func)</span><br><span class="line"><span class="comment"># &lt;__main__.DelayFunc object at 0x0000013845AD0890&gt;</span></span><br><span class="line"><span class="comment"># Wait for 2 seconds...</span></span><br><span class="line"><span class="comment"># 8</span></span><br><span class="line"><span class="comment"># &lt;function add at 0x0000013845B24FE0&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="装饰类的装饰器"><a href="#装饰类的装饰器" class="headerlink" title="装饰类的装饰器"></a>装饰类的装饰器</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">instances = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">singleton</span>(<span class="params">cls</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_instance</span>(<span class="params">*args, **kw</span>):</span><br><span class="line">        cls_name = cls.__name__</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===== 1 ====&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> cls_name <span class="keyword">in</span> instances:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;===== 2 ====&#x27;</span>)</span><br><span class="line">            instance = cls(*args, **kw)</span><br><span class="line">            instances[cls_name] = instance</span><br><span class="line">        <span class="keyword">return</span> instances[cls_name]</span><br><span class="line">    <span class="keyword">return</span> get_instance</span><br><span class="line"></span><br><span class="line"><span class="meta">@singleton</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>:</span><br><span class="line">    <span class="comment"># _instance = None</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;===== 3 ====&#x27;</span>)</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">u1=User(<span class="string">&quot;li&quot;</span>)</span><br><span class="line">u1.age=<span class="number">20</span></span><br><span class="line">u2=User(<span class="string">&quot;dh&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(u1 <span class="keyword">is</span> u2)</span><br><span class="line"><span class="built_in">print</span>(u2.age)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(instances))</span><br><span class="line">a=<span class="built_in">list</span>(instances)</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">===== 1 ====</span></span><br><span class="line"><span class="string">===== 2 ====</span></span><br><span class="line"><span class="string">===== 3 ====</span></span><br><span class="line"><span class="string">===== 1 ====</span></span><br><span class="line"><span class="string">True</span></span><br><span class="line"><span class="string">20</span></span><br><span class="line"><span class="string">1</span></span><br><span class="line"><span class="string">[&#x27;User&#x27;]</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="什么是异常"><a href="#什么是异常" class="headerlink" title="什么是异常"></a>什么是异常</h3><p>导致程序在运行过程中出现异常中断和退出的错误，我们统称为异常。正常情况下，异常都不会被程序处理，而是以错误信息的形式展现出来。<br>有些错误是我们编写代码时自己造成的，比如语法错误、调用错误，甚至逻辑错误。<br>还有一些错误，则是不可预料的错误，但是完全有可能发生的，比如文件不存在、磁盘空间不足、网络堵塞、系统错误等等。</p>
<h3 id="常见异常类型"><a href="#常见异常类型" class="headerlink" title="常见异常类型"></a>常见异常类型</h3><ul>
<li>SyntaxError：语法错误</li>
<li>TypeError：类型错误</li>
<li>IndexError：索引错误</li>
<li>KeyError：关键词错误</li>
<li>ValueError：值错误</li>
<li>AttributeError：属性错误</li>
<li>NameError：变量名称错误</li>
<li>IOError：打开文件错误</li>
<li>StopIteration：迭代器错误</li>
<li>AssertionError：断言错误</li>
<li>IndentationError：缩进错误</li>
<li>ImportError：导包出现错误</li>
</ul>
<h3 id="如何抛出和捕获异常"><a href="#如何抛出和捕获异常" class="headerlink" title="如何抛出和捕获异常"></a>如何抛出和捕获异常</h3><h4 id="抛出异常"><a href="#抛出异常" class="headerlink" title="抛出异常"></a>抛出异常</h4><h5 id="异常产出"><a href="#异常产出" class="headerlink" title="异常产出"></a>异常产出</h5><ul>
<li>一种是程序自动抛出，比如 1&#x2F;0 会自动抛出 ZeroDivisionError</li>
<li>一种是开发者主动抛出，使用 raise 关键字抛出。</li>
</ul>
<h4 id="捕获异常"><a href="#捕获异常" class="headerlink" title="捕获异常"></a>捕获异常</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 异常捕获语法有四种</span></span><br><span class="line"><span class="comment"># 第一种：只捕捉但是没有获取异常信息</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    代码A</span><br><span class="line"><span class="keyword">except</span> [EXCEPTION]:</span><br><span class="line">    代码B</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种：捕捉并获取异常信息，可以把异常信息打印的日志中</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    代码A</span><br><span class="line"><span class="keyword">except</span> [EXCEPTION] <span class="keyword">as</span> e:</span><br><span class="line">    代码B</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三种：如果代码A发生了异常，则会走到代码B的逻辑，如果没有发生异常，则会走到代码C</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    代码A</span><br><span class="line"><span class="keyword">except</span> [exception] <span class="keyword">as</span> e:</span><br><span class="line">    代码B</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    代码C</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第四种：如果代码A发生了异常，则会走到代码B的逻辑，最后不管有没有发生异常都会走到代码C</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    代码A</span><br><span class="line"><span class="keyword">except</span> [exception] <span class="keyword">as</span> e:</span><br><span class="line">    代码B</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    代码C</span><br><span class="line"></span><br><span class="line"><span class="comment"># 捕获多个异常，每个except捕获一个异常</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    代码A</span><br><span class="line"><span class="keyword">except</span> [exception1] <span class="keyword">as</span> e:</span><br><span class="line">    代码B</span><br><span class="line"><span class="keyword">except</span> [exception2] <span class="keyword">as</span> e:</span><br><span class="line">    代码C</span><br><span class="line"><span class="keyword">except</span> [exception3] <span class="keyword">as</span> e:</span><br><span class="line">    代码D</span><br><span class="line"><span class="comment"># 例子</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;IO读写出错&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> FloatingPointError:</span><br><span class="line">    <span class="comment"># 浮点计算错误</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;计算错误&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> ZeroDivisionError:</span><br><span class="line">    <span class="comment"># 除数不能为 0</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;计算错误&quot;</span>)</span><br><span class="line"><span class="comment"># output: 计算错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 一个except捕获多个异常</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="number">1</span>/<span class="number">0</span></span><br><span class="line"><span class="keyword">except</span> IOError:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;IO读写出错&quot;</span>)</span><br><span class="line"><span class="keyword">except</span> (ZeroDivisionError, FloatingPointError):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;计算出错&quot;</span>)</span><br><span class="line"><span class="comment"># output: 计算错误</span></span><br></pre></td></tr></table></figure>
<h3 id="自定义异常"><a href="#自定义异常" class="headerlink" title="自定义异常"></a>自定义异常</h3><p>自定义异常应该继承 Exception 类，直接继承或者间接继承都可以</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">InputError</span>(<span class="title class_ inherited__">Exception</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, msg</span>):</span><br><span class="line">        self.message = msg</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__str__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.message</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_input</span>():</span><br><span class="line">    name = <span class="built_in">input</span>(<span class="string">&quot;请输入你的姓名：&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> name == <span class="string">&quot;&quot;</span>:</span><br><span class="line">        <span class="keyword">raise</span> InputError(<span class="string">&quot;未输入内容&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    get_input()</span><br><span class="line"><span class="keyword">except</span> InputError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="built_in">print</span>(e)</span><br></pre></td></tr></table></figure>
<h3 id="关闭异常自动关联上下文"><a href="#关闭异常自动关联上下文" class="headerlink" title="关闭异常自动关联上下文"></a>关闭异常自动关联上下文</h3><p>在处理异常时，由于处理不当或者其他问题，再次抛出另一个异常时，往外抛出的异常也会携带原始的异常信息。<br>如果在异常处理程序或 finally 块中引发异常，默认情况下，异常机制会隐式工作会将先前的异常附加为新异常的 __context__属性。这就是 Python 默认开启的自动关联异常上下文。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span> / <span class="number">0</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> exc:</span><br><span class="line">    <span class="keyword">raise</span> RuntimeError(<span class="string">&quot;Something bad happened&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695630349657-17ab35f8-6fb3-4cc4-9ecc-152c87d62d73.png#averageHue=%231e1d1b&clientId=ubc405619-8752-4&from=paste&height=261&id=ubffa548b&originHeight=392&originWidth=733&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=36063&status=done&style=none&taskId=u56e7e92d-8a67-452b-8a94-1d050625574&title=&width=488.6666666666667" alt="image.png"><br>如果在异常处理程序或 finally 块中引发异常，默认情况下，异常机制会隐式工作会将先前的异常附加为新异常的 __context__属性。这就是 Python 默认开启的自动关联异常上下文。<br>想自己控制这个上下文，可以加个 from 关键字（from 语法会有个限制，就是第二个表达式必须是另一个异常类或实例。），来表明你的新异常是直接由哪个异常引起的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> exc:</span><br><span class="line">    <span class="keyword">raise</span> RuntimeError(<span class="string">&quot;Something bad happened&quot;</span>) <span class="keyword">from</span> exc</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695633670386-6fdeb774-fe0b-4ce7-8ec4-50b77b2132f8.png#averageHue=%231f1d1c&clientId=ubc405619-8752-4&from=paste&height=241&id=u625ed27b&originHeight=362&originWidth=718&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=34378&status=done&style=none&taskId=u063a110e-6b1d-4907-ae4d-1375d57ed05&title=&width=478.6666666666667" alt="image.png"></p>
<h5 id="使用raise…from-None可以关闭这个自动关联异常上下文机制"><a href="#使用raise…from-None可以关闭这个自动关联异常上下文机制" class="headerlink" title="使用raise…from None可以关闭这个自动关联异常上下文机制"></a>使用raise…from None可以关闭这个自动关联异常上下文机制</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">1</span>/<span class="number">0</span>)</span><br><span class="line"><span class="keyword">except</span> Exception:</span><br><span class="line">    <span class="keyword">raise</span> RuntimeError(<span class="string">&quot;Something bad happened&quot;</span>) <span class="keyword">from</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695634075885-d9e7beda-7474-4cca-b5fc-fd7f5828a653.png#averageHue=%23211e1c&clientId=ubc405619-8752-4&from=paste&height=127&id=uc4e0a952&originHeight=190&originWidth=727&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=21813&status=done&style=none&taskId=u80eab2a2-7da1-4df2-a3ce-e4e7bc870f3&title=&width=484.6666666666667" alt="image.png"></p>
<ul>
<li>永远只捕获那些可能会抛出异常的语句块</li>
<li>尽量只捕获精确的异常类型，而不是模糊的exception</li>
</ul>
<h2 id="类和对象"><a href="#类和对象" class="headerlink" title="类和对象"></a>类和对象</h2><h3 id="类的基础"><a href="#类的基础" class="headerlink" title="类的基础"></a>类的基础</h3><h5 id="类定义："><a href="#类定义：" class="headerlink" title="类定义："></a>类定义：</h5><p>类（英文名 class），是具有相同特性（属性）和行为（方法）的对象（实例）的抽象模板。<br>定义类语法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    age = <span class="number">0</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> 跑起来了&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>其中<br>Animal 是类名<br><strong>init</strong> 是构造函数，用于实例的初始化<br>self.name 是实例属性，age 是类属性<br>run 是方法，第一个参数 self 是什么意思呢？这个咱后面再讲。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种写法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种写法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>():</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三种写法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 实例化</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> 跑起来了&quot;</span>)</span><br><span class="line">dog=Animal(name=<span class="string">&quot;小黑&quot;</span>)  <span class="comment"># 实例化出 dog 对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法调用</span></span><br><span class="line">dog=Animal(name=<span class="string">&quot;小黑&quot;</span>)</span><br><span class="line">dog.name  <span class="comment"># 访问属性</span></span><br><span class="line"><span class="comment"># &#x27;小黑&#x27;</span></span><br><span class="line"><span class="comment"># 调用方法则有两种方式</span></span><br><span class="line"><span class="comment"># 第一种</span></span><br><span class="line">dog.run()</span><br><span class="line"><span class="comment"># 第二种</span></span><br><span class="line">Animal.run(dog)		<span class="comment">#使用这种方法，要传入实例对象名</span></span><br></pre></td></tr></table></figure>
<h3 id="静态方法与类方法"><a href="#静态方法与类方法" class="headerlink" title="静态方法与类方法"></a>静态方法与类方法</h3><h5 id="类的方法分类"><a href="#类的方法分类" class="headerlink" title="类的方法分类"></a>类的方法分类</h5><ul>
<li>静态方法：staticmethod装饰</li>
<li>类方法：classmethod装饰</li>
<li>实例方法：没有任何装饰器装饰的普通函数<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">run</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span>跑起来啦&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">eat</span>():</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;正在吃饭...&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">jump</span>(<span class="params">cls, name</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;name&#125;</span>jump!&quot;</span>)</span><br><span class="line"></span><br><span class="line">dog=Animal(name=<span class="string">&quot;wangwang&quot;</span>)</span><br><span class="line"><span class="comment"># instance</span></span><br><span class="line">dog.run()</span><br><span class="line">Animal.run(<span class="string">&quot;wangwang&quot;</span>)</span><br><span class="line"><span class="comment"># staticmethod</span></span><br><span class="line">dog.eat()</span><br><span class="line">Animal.eat()</span><br><span class="line"><span class="comment"># classmethod</span></span><br><span class="line">dog.jump(<span class="string">&quot;wangwang&quot;</span>)</span><br><span class="line">Animal.jump(<span class="string">&quot;wangwang&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="方法与函数区别"><a href="#方法与函数区别" class="headerlink" title="方法与函数区别"></a>方法与函数区别</h5><p>普通函数（未定位在类里）和静态方法，都是函数（function ）。<br>实例方法（@staticmethod）和类方法，都是方法（method ）。</p>
<h3 id="私有变量和私有方法"><a href="#私有变量和私有方法" class="headerlink" title="私有变量和私有方法"></a>私有变量和私有方法</h3><h5 id="关于下划线"><a href="#关于下划线" class="headerlink" title="关于下划线"></a>关于下划线</h5><ul>
<li>变量名推荐使用下划线分隔的蛇形命名法</li>
<li>魔法方法、构造函数都需要使用双下划线</li>
<li>对于暂时用不到的变量值，可以赋值给单下划线 _ 进行占位</li>
</ul>
<p>下划线分类：</p>
<ul>
<li>单前导下划线：_var<ul>
<li>当涉及到变量和方法名称时，单个下划线前缀有一个约定俗成的含义。 它是对程序员的一个提示</li>
<li>下划线前缀的含义是告知其他程序员：以单个下划线开头的变量或方法仅供内部使用。 但这仅是程序员之间的约定，不影响程序进入类访问变量</li>
<li>但是会影响导入：使用通配符导入模块中所有的名称，则Python不会导入带有前导下划线的名称（除非模块定义了覆盖此行为的__all__列表）</li>
<li>当然，一般避免通配符导入</li>
</ul>
</li>
<li>单末尾下划线：var_<ul>
<li>有时候，一个变量的最合适的名称已经被一个关键字所占用。 因此，像class或def这样的名称不能用作Python中的变量名称。 在这种情况下，可以附加一个下划线来解决命名冲突</li>
<li>同样，也是一个约定，只是避免和关键词产生冲突</li>
</ul>
</li>
<li>双前导下划线：__var<ul>
<li><p>这个可以说是大不一样了，它会改变变量和方法的名称</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>:</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">       self.foo = <span class="number">11</span></span><br><span class="line">       self._bar = <span class="number">23</span></span><br><span class="line">       self.__baz = <span class="number">23</span></span><br><span class="line">t=Test()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(t))</span><br></pre></td></tr></table></figure>
</li>
<li><p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695718863564-ea6ec5cd-87bc-4060-922e-aa53fb3b29cb.png#averageHue=%23201e1c&clientId=ubc405619-8752-4&from=paste&height=131&id=u88106c96&originHeight=197&originWidth=751&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=20156&status=done&style=none&taskId=u5b68a4ce-153a-4f0f-a9fe-35d26908172&title=&width=500.6666666666667" alt="image.png"></p>
</li>
<li><p>可以看到，单前导和foo都没有改变，而双前导的属性名字改变了，’_Test__baz’，他在前面加上了这个类的单前导加类名</p>
</li>
<li><p>同时，无法通过print(t.__baz)访问到它，已经完全变成了新的名字了</p>
</li>
<li><p>在继承中，显然也不会被重写</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span>:</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">       self.foo = <span class="number">11</span></span><br><span class="line">       self._bar = <span class="number">23</span></span><br><span class="line">       self.__baz = <span class="number">23</span></span><br><span class="line">t=Test()</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(t))</span><br><span class="line"><span class="comment"># print(t.__baz)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ExtendedTest</span>(<span class="title class_ inherited__">Test</span>):</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="built_in">super</span>().__init__()</span><br><span class="line">       self.foo = <span class="string">&#x27;overridden&#x27;</span></span><br><span class="line">       self._bar = <span class="string">&#x27;overridden&#x27;</span></span><br><span class="line">       self.__baz = <span class="string">&#x27;overridden&#x27;</span></span><br><span class="line"></span><br><span class="line">t2 = ExtendedTest()</span><br><span class="line"><span class="built_in">print</span>(t2.foo)</span><br><span class="line"><span class="built_in">print</span>(t2._bar)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(t2))</span><br><span class="line"><span class="built_in">print</span>(t2.__baz)</span><br></pre></td></tr></table></figure>

<ul>
<li><p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695719249376-460b5749-59e0-401d-9210-129dcb586ae5.png#averageHue=%231f1d1c&clientId=ubc405619-8752-4&from=paste&height=377&id=uffdf2f09&originHeight=565&originWidth=758&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=50844&status=done&style=none&taskId=u4058cf2b-2770-4b55-9d73-44c8392df54&title=&width=505.3333333333333" alt="image.png"></p>
</li>
<li><p>没有改变原来的’_Test__baz’，而是添加了’_ExtendedTest__baz’</p>
</li>
<li><p>以上说的，对方法也适用，这种方法可以很好的防止变量被重写，想要访问，得通过实例._类名__方法名 来调用</p>
</li>
<li><p>另外，以下这个例子也可以很好的说明python这种改变属性名的情况</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">_MangledGlobal__mangled = <span class="number">23</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MangledGlobal</span>:</span><br><span class="line">   <span class="keyword">def</span> <span class="title function_">test</span>(<span class="params">self</span>):</span><br><span class="line">       <span class="keyword">return</span> __mangled</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(MangledGlobal().test())</span><br><span class="line"><span class="comment"># 虽然我从来没有定义过__mangled，但是这里依旧正常输出了23</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>双前导和末尾下划线：<strong>var</strong></p>
<ul>
<li>只有双前导的会改变名字，但是这种双前导和双末尾都具有的反而不会被python解释器修改</li>
<li>但是这种格式一般都有特殊用法，这些dunder被我们称为神奇方法，尽量避免使用这种命名，以免与python语言的变化产生冲突</li>
<li>dunder是 Double UNDERscore（中文双下划线）的缩写，分别取Double的D 和 Underscore的Under组成。这样取名后方便发音。</li>
</ul>
</li>
<li><p>单下划线：_</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 有时候单个独立下划线是用作一个名字，来表示某个变量是临时的或无关紧要的。</span></span><br><span class="line"><span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) </span><br><span class="line">	<span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 表示占位符</span></span><br><span class="line">car = (<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;auto&#x27;</span>, <span class="number">12</span>, <span class="number">3812.4</span>)	<span class="comment">#咱只关心第一个和最后一个数据</span></span><br><span class="line">color, _, _, mileage = car</span><br><span class="line"><span class="built_in">print</span>(car)</span><br><span class="line"><span class="built_in">print</span>(mileage)</span><br><span class="line"><span class="built_in">print</span>(_)		<span class="comment"># 表示离他最近的一次赋值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695720437195-81ca41dc-6ada-476e-b4dc-f6531378cd64.png#averageHue=%231d1c1a&clientId=ubc405619-8752-4&from=paste&height=57&id=uf8154ccd&originHeight=85&originWidth=312&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=4126&status=done&style=none&taskId=ua57063b0-b6b7-4350-9402-b52265fd266&title=&width=208" alt="image.png"></p>
</li>
</ul>
<h3 id="类的封装"><a href="#类的封装" class="headerlink" title="类的封装"></a>类的封装</h3><p>封装是指将数据与具体操作的实现代码放在某个对象内部，使这些代码的实现细节不被外界发现，外界只能通过接口使用该对象，而不能通过任何形式修改对象内部实现。<br>而私有化函数与私有化方法通过在前面加双下划线来实现，虽然平时也可以通过加类名的方法访问，但是不建议直接这么做，应该统一接口来对私有化的成员进行查看与调用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">xh = Person(name=<span class="string">&quot;小红&quot;</span>, age=<span class="number">27</span>)</span><br><span class="line"><span class="keyword">if</span> xh.age &gt;= <span class="number">18</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;xh.name&#125;</span>已经是成年人了&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;xh.name&#125;</span>还是未年人&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 但是对女生来说，年龄比较隐私，不想暴露</span></span><br><span class="line"><span class="comment"># 于是</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.__age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">is_adult</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.__age &gt;= <span class="number">18</span></span><br><span class="line"></span><br><span class="line">xh = Person(name=<span class="string">&quot;小红&quot;</span>, age=<span class="number">27</span>)</span><br><span class="line">xh.is_adult()</span><br></pre></td></tr></table></figure>
<h3 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h3><p>被继承的类称为基类（也叫做父类），继承而得的类叫派生类（也叫子类），这种关系就像人类的父子关系。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 继承语法</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">子类</span>(<span class="title class_ inherited__">父类</span>):</span><br></pre></td></tr></table></figure>
<h5 id="单继承与多继承"><a href="#单继承与多继承" class="headerlink" title="单继承与多继承"></a>单继承与多继承</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 单继承</span></span><br><span class="line"><span class="comment"># 父类定义</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">People</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, weight</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> 说: 我<span class="subst">&#123;self.age&#125;</span>岁。&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 单继承示例</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">People</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, weight, grade</span>):</span><br><span class="line">        <span class="comment"># 调用父类的实例化方法</span></span><br><span class="line">        People.__init__(self, name, age, weight)</span><br><span class="line">        self.grade = grade</span><br><span class="line"></span><br><span class="line">xm = Student(name=<span class="string">&quot;小明&quot;</span>, age=<span class="number">10</span>, weight=<span class="number">50</span>, grade=<span class="string">&quot;三年级&quot;</span>)</span><br><span class="line">xm.speak()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 如果有部分变量或者方法需要修改，可以覆写</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>(<span class="title class_ inherited__">People</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age, weight, grade</span>):</span><br><span class="line">        <span class="comment"># 调用父类的实例化方法</span></span><br><span class="line">        People.__init__(self, name, age, weight)</span><br><span class="line">        self.grade = grade</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 重写父类的speak方法</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> 说: 我<span class="subst">&#123;self.age&#125;</span>岁了，我在读<span class="subst">&#123;self.grade&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多继承</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">子类</span>(父类<span class="number">1</span>, 父类<span class="number">2</span>, 父类<span class="number">3.</span>..):</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多继承就会出现顺序问题，同一个函数，父类都含有同一个方法时，继承哪一个？</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am D&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">D</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am C&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">C</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am B&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">G</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am G&quot;</span>)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">F</span>(<span class="title class_ inherited__">G</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am F&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">E</span>(<span class="title class_ inherited__">F</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am E&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(B, E):<span class="keyword">pass</span></span><br><span class="line">a=A()</span><br><span class="line">a.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 这样子就会形成一个从左往右的继承树</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695799504353-812860eb-2e33-428c-a9e4-f3748424ecdb.png#averageHue=%23fcfaf9&clientId=ubc405619-8752-4&from=paste&height=271&id=u03bd224d&originHeight=407&originWidth=479&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=22656&status=done&style=none&taskId=u753d5ebe-badf-41c9-b58c-ea02fae63c8&title=&width=319.3333333333333" alt="image.png"><br>继承树如上<br>从左往右，从上往下，深度优先<br>然而，大部分时候，遇见的继承关系都不会这么单纯简单<br>可以使用两种方法查询</p>
<ul>
<li>使用 <strong>mro</strong> 来查询</li>
<li>使用 merge算法进行推导<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>(<span class="title class_ inherited__">object</span>):<span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>(<span class="title class_ inherited__">A</span>):<span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">C</span>(<span class="title class_ inherited__">A</span>):<span class="keyword">pass</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">D</span>(B, C):<span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># __mro__</span></span><br><span class="line"><span class="built_in">print</span>(D.__mro__)</span><br><span class="line"></span><br><span class="line"><span class="comment"># inspect</span></span><br><span class="line"><span class="keyword">import</span> inspect</span><br><span class="line"><span class="built_in">print</span> inspect.getmro(D)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">(&lt;class &#x27;__main__.D&#x27;&gt;,</span></span><br><span class="line"><span class="string"> &lt;class &#x27;__main__.B&#x27;&gt;,</span></span><br><span class="line"><span class="string"> &lt;class &#x27;__main__.C&#x27;&gt;,</span></span><br><span class="line"><span class="string"> &lt;class &#x27;__main__.A&#x27;&gt;,</span></span><br><span class="line"><span class="string"> &lt;class &#x27;object&#x27;&gt;)</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># merge推导</span></span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/whatisfantasy/p/6046991.html">https://www.cnblogs.com/whatisfantasy/p/6046991.html</a></p>
<h3 id="类的多态"><a href="#类的多态" class="headerlink" title="类的多态"></a>类的多态</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">People</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">American</span>(<span class="title class_ inherited__">People</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Hello, boys&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Chinese</span>(<span class="title class_ inherited__">People</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;你好，老铁&quot;</span>)</span><br><span class="line"></span><br><span class="line">p1 = American()</span><br><span class="line">p2 = Chinese()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多态</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">do_speak</span>(<span class="params">people</span>):</span><br><span class="line">    people.speak()</span><br><span class="line"></span><br><span class="line">do_speak(p1)</span><br><span class="line">do_speak(p2)</span><br></pre></td></tr></table></figure>
<h3 id="类的property属性"><a href="#类的property属性" class="headerlink" title="类的property属性"></a>类的property属性</h3><p>property ，其实是 Python 中一个内置的装饰器，它可以在新式类中把一个函数 改造 成属性。<br>当你读取属性值时，会进入被 property 装饰的函数。<br>当你对属性进行赋值时，会进入被 @xx.setter 装饰的函数。<br>两个装饰器，一定是 @property 在前面，而 @xx.setter 在后</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._age</span><br><span class="line"></span><br><span class="line"><span class="meta">    @age.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt;= value &lt;= <span class="number">150</span>:</span><br><span class="line">            self._age = value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Valid value must be in [0, 150]&quot;</span>)</span><br></pre></td></tr></table></figure>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/32640305/1695875040590-f0bc3fcc-57d5-4510-8785-9104bdd226b7.png#averageHue=%23201e1c&clientId=ubc405619-8752-4&from=paste&height=155&id=u9bccc82b&originHeight=233&originWidth=747&originalType=binary&ratio=1.5&rotation=0&showTitle=false&size=25610&status=done&style=none&taskId=uc4c3e99d-8c70-45af-80f1-33bda3ec6fd&title=&width=498" alt="image.png"></p>
<h3 id="类的Mixin设计模式"><a href="#类的Mixin设计模式" class="headerlink" title="类的Mixin设计模式"></a>类的Mixin设计模式</h3><h5 id="定义-1"><a href="#定义-1" class="headerlink" title="定义"></a>定义</h5><p>就是正常的定义类，名字后面加一个Mixin，这种类只实现某个功能，用于添加到子类中</p>
<h5 id="功能规范"><a href="#功能规范" class="headerlink" title="功能规范"></a>功能规范</h5><p>使用Mixin类实现多重继承要遵循以下几个规范</p>
<ul>
<li>责任明确：必须表示某一种功能，而不是某个物品；</li>
<li>功能单一：若有多个功能，那就写多个Mixin类；</li>
<li>绝对独立：不能依赖于子类的实现；子类即便没有继承这个Mixin类，也照样可以工作，就是缺少了某个功能。</li>
</ul>
<h5 id="不使用这个模式开发有以下几个弊端"><a href="#不使用这个模式开发有以下几个弊端" class="headerlink" title="不使用这个模式开发有以下几个弊端"></a>不使用这个模式开发有以下几个弊端</h5><ul>
<li>结构复杂<ul>
<li>多个父类，继承关系混乱</li>
</ul>
</li>
<li>优先顺序模糊<ul>
<li>多个父类有同名方法，开发过程中，这种混乱，难以理清</li>
</ul>
</li>
<li>功能冲突</li>
</ul>
<h3 id="类的魔术方法"><a href="#类的魔术方法" class="headerlink" title="类的魔术方法"></a>类的魔术方法</h3><h5 id="定义-2"><a href="#定义-2" class="headerlink" title="定义"></a>定义</h5><p>之前提到了，被两个下划线包围的特殊方法就是魔术方法<br>具体不详细介绍了：<a target="_blank" rel="noopener" href="https://python.iswbm.com/c07/c07_09.html">https://python.iswbm.com/c07/c07_09.html</a></p>
<h3 id="元类编程"><a href="#元类编程" class="headerlink" title="元类编程"></a>元类编程</h3><p>使用继承的表面形式来创建一个类，其内部真正的创建是由 type 来创建的。<br>使用type创建，type() 需要接收三个参数</p>
<ul>
<li>类的名称，若不指定，也要传入空字符串：””</li>
<li>父类，注意以tuple的形式传入，若没有父类也要传入空tuple：()，默认继承object</li>
<li>绑定的方法或属性，注意以dict的形式传入<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 准备一个基类（父类）</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BaseClass</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">talk</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;i am people&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 准备一个方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">say</span>(<span class="params">self</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用type来创建User类</span></span><br><span class="line">User = <span class="built_in">type</span>(<span class="string">&quot;User&quot;</span>, (BaseClass, ), &#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;user&quot;</span>, <span class="string">&quot;say&quot;</span>:say&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<p>类是创建对象的模板，元类，就是创建类的模板<br>type是Python在背后用来创建所有类的元类，我们熟知的类的始祖 object 也是由type创建的，连type自己也是由type自己创建的</p>
<ul>
<li>str：用来创建字符串对象的类。</li>
<li>int：是用来创建整数对象的类。</li>
<li>type：是用来创建类对象的类。’</li>
</ul>
<h3 id="类的描述符Descriptor"><a href="#类的描述符Descriptor" class="headerlink" title="类的描述符Descriptor"></a>类的描述符Descriptor</h3><p>一个实现了 描述符协议 的类就是一个描述符。<br>描述符协议：在类里实现了 <strong>get</strong>()、<strong>set</strong>()、<strong>delete</strong>() 其中至少一个方法。</p>
<ul>
<li>__get__： 用于访问属性。它返回属性的值，若属性不存在、不合法等都可以抛出对应的异常。</li>
<li>__set__：将在属性分配操作中调用。不会返回任何内容。</li>
<li>__delete__：控制删除操作。不会返回内容。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 例：做个成绩管理系统</span></span><br><span class="line"><span class="comment"># 语数外三科，对分数实现简单的判断</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, math, chinese, english</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.math = math</span><br><span class="line">        self.chinese = chinese</span><br><span class="line">        self.english = english</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">math</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._math</span><br><span class="line"></span><br><span class="line"><span class="meta">    @math.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">math</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt;= value &lt;= <span class="number">100</span>:</span><br><span class="line">            self._math = value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Valid value must be in [0, 100]&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">chinese</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._chinese</span><br><span class="line"></span><br><span class="line"><span class="meta">    @chinese.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">chinese</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt;= value &lt;= <span class="number">100</span>:</span><br><span class="line">            self._chinese = value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Valid value must be in [0, 100]&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">english</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self._english</span><br><span class="line"></span><br><span class="line"><span class="meta">    @english.setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">english</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt;= value &lt;= <span class="number">100</span>:</span><br><span class="line">            self._english = value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&quot;Valid value must be in [0, 100]&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt;Student: &#123;&#125;, math:&#123;&#125;, chinese: &#123;&#125;, english:&#123;&#125;&gt;&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">                self.name, self.math, self.chinese, self.english</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显然，大量代码重复，在这里可以使用描述符</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Score</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, default=<span class="number">0</span></span>):</span><br><span class="line">        self._score = default</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__set__</span>(<span class="params">self, instance, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(value, <span class="built_in">int</span>):</span><br><span class="line">            <span class="keyword">raise</span> TypeError(<span class="string">&#x27;Score must be integer&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="number">0</span> &lt;= value &lt;= <span class="number">100</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError(<span class="string">&#x27;Valid value must be in [0, 100]&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        self._score = value</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__get__</span>(<span class="params">self, instance, owner</span>):</span><br><span class="line">        <span class="keyword">return</span> self._score</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__delete__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">del</span> self._score</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    math = Score(<span class="number">0</span>)</span><br><span class="line">    chinese = Score(<span class="number">0</span>)</span><br><span class="line">    english = Score(<span class="number">0</span>)</span><br><span class="line">    <span class="comment"># 这样写，这三个属性就会变为类变量，所有实例共享</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, math, chinese, english</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.math = math</span><br><span class="line">        self.chinese = chinese</span><br><span class="line">        self.english = english</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt;Student: &#123;&#125;, math:&#123;&#125;, chinese: &#123;&#125;, english:&#123;&#125;&gt;&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">                self.name, self.math, self.chinese, self.english</span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这么写可以把类变量分开</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Score</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, subject</span>):</span><br><span class="line">        self.name = subject</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__get__</span>(<span class="params">self, instance, owner</span>):</span><br><span class="line">        <span class="keyword">return</span> instance.__dict__[self.name]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__set__</span>(<span class="params">self, instance, value</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="number">0</span> &lt;= value &lt;= <span class="number">100</span>:</span><br><span class="line">            instance.__dict__[self.name] = value</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">raise</span> ValueError</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>:</span><br><span class="line">    math = Score(<span class="string">&quot;math&quot;</span>)</span><br><span class="line">    chinese = Score(<span class="string">&quot;chinese&quot;</span>)</span><br><span class="line">    english = Score(<span class="string">&quot;english&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, math, chinese, english</span>):</span><br><span class="line">        self.math = math</span><br><span class="line">        self.chinese = chinese</span><br><span class="line">        self.english = english</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__repr__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&lt;Student math:&#123;&#125;, chinese:&#123;&#125;, english:&#123;&#125;&gt;&quot;</span>.<span class="built_in">format</span>(self.math, self.chinese, self.english)</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="描述符访问规则"><a href="#描述符访问规则" class="headerlink" title="描述符访问规则"></a>描述符访问规则</h5><p>描述符分两种：<br>数据描述符：实现了__get__ 和 <strong>set</strong> 两种方法的描述符<br>非数据描述符：只实现了__get__ 一种方法的描述符<br>它们的区别在于相对于实例的字典的优先级不同<br>实例字典中有与描述符同名的属性，如果描述符是数据描述符，优先使用数据描述符，如果是非数据描述符，优先使用字典中的属性。</p>
<h2 id="包与模块"><a href="#包与模块" class="headerlink" title="包与模块"></a>包与模块</h2><h3 id="基本定义"><a href="#基本定义" class="headerlink" title="基本定义"></a>基本定义</h3><h5 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h5><p>模块就是以.py为后缀的文件，可以使用import导入，导入以后，就可以通过模块名.变量名的方式访问这个文件的变量<br>在导入模块的时候，一个很重要的全局变量__name__会发生改变<br>当模块被直接执行的时候，<strong>name__会被改变为__main</strong><br>当模块被导入的时候，__name__的值为模块名<br>模块被导入以后，会产生一个__pycache__的缓存文件夹，导入模块的时候，Python解释器会把模块的代码编译成字节码，并放入 __pycache__文件夹中</p>
<h5 id="包"><a href="#包" class="headerlink" title="包"></a>包</h5><p>Python3.3之前，一个文件夹里面含有__init__.py文件，我们就把这个文件夹称为包<br>后面只要是文件夹就可以叫做包，称之为空间命名包</p>
<h5 id="库"><a href="#库" class="headerlink" title="库"></a>库</h5><p>Python 库是指一定功能的代码集合，通常认为他是一个完整的项目打包。<br>库-&gt;包-&gt;模块，是从大到小的层级关系！</p>
<ul>
<li>库：一个库可能由多个包和模块组成</li>
<li>包：一个包可能由多个模块组成</li>
<li>模块：一堆函数、类、变量的集合</li>
</ul>
<h5 id="安装第三方包的八种方法"><a href="#安装第三方包的八种方法" class="headerlink" title="安装第三方包的八种方法"></a>安装第三方包的八种方法</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.easy_install(最古老，目前基本无人使用)</span></span><br><span class="line"><span class="comment"># 通过包名，从PyPI寻找最新版本，自动下载、编译、安装</span></span><br><span class="line">$ easy_install pkg_name</span><br><span class="line"><span class="comment"># 通过包名从指定下载页寻找链接来安装或升级包</span></span><br><span class="line">$ easy_install -f http://pythonpaste.org/package_index.html</span><br><span class="line"><span class="comment"># 指定线上的包地址安装</span></span><br><span class="line">$ easy_install http://example.com/path/to/MyPackage-<span class="number">1.2</span><span class="number">.3</span>.tgz</span><br><span class="line"><span class="comment"># 从本地的 .egg 文件安装</span></span><br><span class="line">$ easy_install xxx.egg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2.pip install(pip是最主流的包管理方案)</span></span><br><span class="line"><span class="comment"># pip install xxx 就可以从 PYPI 上搜索并安装 xxx</span></span><br><span class="line">$ pip install requests</span><br><span class="line"><span class="comment"># 前提你得保证你已经下载 pkg 包到 /local/wheels 目录下</span></span><br><span class="line">$ pip install --no-index --find-links=/local/wheels pkg</span><br><span class="line"><span class="comment"># 所安装的包的版本为 2.1.2</span></span><br><span class="line">$ pip install pkg==<span class="number">2.1</span><span class="number">.2</span></span><br><span class="line"><span class="comment"># 所安装的包必须大于等于 2.1.2</span></span><br><span class="line">$ pip install pkg&gt;=<span class="number">2.1</span><span class="number">.2</span></span><br><span class="line"><span class="comment"># 所安装的包必须小于等于 2.1.2</span></span><br><span class="line">$ pip install pkg&lt;=<span class="number">2.1</span><span class="number">.2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3.pipx</span></span><br><span class="line"><span class="comment"># pipx是一个专门安装和管理cli应用程序：（command-line interface，命令行界面）的工具，使用前需要先安装</span></span><br><span class="line">$ python3 -m pip install --user pipx</span><br><span class="line">$ python3 -m userpath append ~/.local/<span class="built_in">bin</span></span><br><span class="line"><span class="comment"># 然后就可以使用pipx安装cli工具了</span></span><br><span class="line">$ pipx install pkg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4.setup.py</span></span><br><span class="line"><span class="comment"># 如果有编写setup.py文件，可以直接使用源码安装</span></span><br><span class="line">$ python setup.py install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 5.yum</span></span><br><span class="line"><span class="comment"># python包在使用setup文件构建时，对包的发布格式可以选择bdist_rpm</span></span><br><span class="line"><span class="comment"># 发布 rpm 包</span></span><br><span class="line">$ python setup.py bdist_rpm</span><br><span class="line"><span class="comment"># 而对于这种格式，可以使用 yum install xxx 或者 rpm install xxx 来安装。</span></span><br><span class="line"><span class="comment"># 使用 yum 安装</span></span><br><span class="line">$ yum install pkg</span><br><span class="line"><span class="comment"># 使用 rpm 安装</span></span><br><span class="line">$ rpm -ivh pkg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 6.在pipenv虚拟环境中可以使用</span></span><br><span class="line">$ pipenv install pkg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.使用poetry管理项目依赖，可以使用：</span></span><br><span class="line"><span class="comment"># 直接安装包</span></span><br><span class="line">$ poetry add pkg</span><br><span class="line"><span class="comment"># 指定为开发依赖</span></span><br><span class="line">$ poetry add pytest --dev</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用curl+管道</span></span><br><span class="line">$ curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py | python</span><br></pre></td></tr></table></figure>
<h3 id="导入单元"><a href="#导入单元" class="headerlink" title="导入单元"></a>导入单元</h3><h4 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h4><h5 id="模块："><a href="#模块：" class="headerlink" title="模块："></a>模块：</h5><p>类似 *.py，.pyc， <em>.pyd ，.so，</em>.dll 这样的文件，是 Python 代码载体的最小单元。</p>
<h5 id="包（可以分为两种）："><a href="#包（可以分为两种）：" class="headerlink" title="包（可以分为两种）："></a>包（可以分为两种）：</h5><ul>
<li>Regular packages：是一个带有 <strong>init</strong>.py 文件的文件夹，此文件夹下可包含其他子包，或者模块</li>
<li>Namespace packages</li>
</ul>
<h4 id="标准写法"><a href="#标准写法" class="headerlink" title="标准写法"></a>标准写法</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入方式两种写法</span></span><br><span class="line"><span class="comment"># 相对导入（relative import ）：</span></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> B 或 <span class="keyword">from</span> ..A <span class="keyword">import</span> B，<span class="comment">#其中.表示当前模块，..表示上层模块</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绝对导入（absolute import）：</span></span><br><span class="line"><span class="keyword">import</span> foo.bar 或 <span class="keyword">from</span> foo <span class="keyword">import</span> bar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在 PEP8 中对模块的导入提出了要求，遵守 PEP8规范能让代码更具有可读性</span></span><br><span class="line"><span class="comment"># import 语句应当分行书写</span></span><br><span class="line"><span class="comment"># import语句应当使用absolute import</span></span><br><span class="line"><span class="comment"># import语句应当放在文件头部，置于模块说明及docstring之后，全局变量之前</span></span><br><span class="line"><span class="comment"># import语句应该按照顺序排列，每组之间用一个空格分隔，按照内置模块，第三方模块，自己所写的模块调用顺序，同时每组内部按照字母表顺序排列</span></span><br><span class="line"><span class="comment"># 内置模块</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第三方模块</span></span><br><span class="line"><span class="keyword">import</span> flask</span><br><span class="line"></span><br><span class="line"><span class="comment"># 本地模块</span></span><br><span class="line"><span class="keyword">from</span> foo <span class="keyword">import</span> bar</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>花式导入包的八种方法</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>直接 <span class="keyword">import</span></span><br><span class="line">人尽皆知的方法，直接导入即可</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> os</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line">与此类似的还有，不再细讲</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"><span class="keyword">import</span> ... <span class="keyword">as</span> ...</span><br><span class="line"><span class="keyword">from</span> ... <span class="keyword">import</span> ...</span><br><span class="line"><span class="keyword">from</span> ... <span class="keyword">import</span> ... <span class="keyword">as</span> ...</span><br><span class="line">一般情况下，使用 <span class="keyword">import</span> 语句导入模块已经够用的。</span><br><span class="line"></span><br><span class="line">但是在一些特殊场景中，可能还需要其他的导入方式。</span><br><span class="line"></span><br><span class="line">下面我会一一地给你介绍。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span> 使用 <span class="built_in">__import__</span></span><br><span class="line"><span class="built_in">__import__</span> 函数可用于导入模块，<span class="keyword">import</span> 语句也会调用函数。其定义为：</span><br><span class="line"></span><br><span class="line"><span class="built_in">__import__</span>(name[, <span class="built_in">globals</span>[, <span class="built_in">locals</span>[, fromlist[, level]]]])</span><br><span class="line">参数介绍：</span><br><span class="line"></span><br><span class="line">name (required): 被加载 module 的名称</span><br><span class="line"></span><br><span class="line"><span class="built_in">globals</span> (optional): 包含全局变量的字典，该选项很少使用，采用默认值 <span class="keyword">global</span>()</span><br><span class="line"></span><br><span class="line"><span class="built_in">locals</span> (optional): 包含局部变量的字典，内部标准实现未用到该变量，采用默认值 - local()</span><br><span class="line"></span><br><span class="line">fromlist (<span class="type">Optional</span>): 被导入的 submodule 名称</span><br><span class="line"></span><br><span class="line">level (<span class="type">Optional</span>): 导入路径选项，Python <span class="number">2</span> 中默认为 -<span class="number">1</span>，表示同时支持 absolute <span class="keyword">import</span> 和 relative <span class="keyword">import</span>。Python <span class="number">3</span> 中默认为 <span class="number">0</span>，表示仅支持 absolute <span class="keyword">import</span>。如果大于 <span class="number">0</span>，则表示相对导入的父目录的级数，即 <span class="number">1</span> 类似于 ‘.’，<span class="number">2</span> 类似于 ‘..’。</span><br><span class="line"></span><br><span class="line">使用示例如下：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os = <span class="built_in">__import__</span>(<span class="string">&#x27;os&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>os.getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line">如果要实现 <span class="keyword">import</span> xx <span class="keyword">as</span> yy 的效果，只要修改左值即可</span><br><span class="line"></span><br><span class="line">如下示例，等价于 <span class="keyword">import</span> os <span class="keyword">as</span> myos：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos = <span class="built_in">__import__</span>(<span class="string">&#x27;os&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos.getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line">上面说过的 <span class="built_in">__import__</span> 是一个内建函数，既然是内建函数的话，那么这个内建函数必将存在于 __buildins__ 中，因此我们还可以这样导入 os 的模块：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>__builtins__.__dict__[<span class="string">&#x27;__import__&#x27;</span>](<span class="string">&#x27;os&#x27;</span>).getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line"><span class="number">3.</span> 使用 importlib 模块</span><br><span class="line">importlib 是 Python 中的一个标准库，importlib 能提供的功能非常全面。</span><br><span class="line"></span><br><span class="line">它的简单示例：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> importlib</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos=importlib.import_module(<span class="string">&quot;os&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos.getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line">如果要实现 <span class="keyword">import</span> xx <span class="keyword">as</span> yy效果，可以这样</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> importlib</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos = importlib.import_module(<span class="string">&quot;os&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos.getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line"><span class="number">4.</span> 使用 imp 模块</span><br><span class="line">imp 模块提供了一些 <span class="keyword">import</span> 语句内部实现的接口。例如模块查找（find_module）、模块加载（load_module）等等（模块的导入过程会包含模块查找、加载、缓存等步骤）。可以用该模块来简单实现内建的 <span class="built_in">__import__</span> 函数功能：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> imp</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>file, pathname, desc = imp.find_module(<span class="string">&#x27;os&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos = imp.load_module(<span class="string">&#x27;sep&#x27;</span>, file, pathname, desc)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos</span><br><span class="line">&lt;module <span class="string">&#x27;sep&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;/usr/lib64/python2.7/os.pyc&#x27;</span>&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>myos.getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line">从 python <span class="number">3</span> 开始，内建的 reload 函数被移到了 imp 模块中。而从 Python <span class="number">3.4</span> 开始，imp 模块被否决，不再建议使用，其包含的功能被移到了 importlib 模块下。即从 Python <span class="number">3.4</span> 开始，importlib 模块是之前 imp 模块和 importlib 模块的合集。</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span> 使用 execfile</span><br><span class="line">在 Python <span class="number">2</span> 中有一个 execfile 函数，利用它可以用来执行一个文件。</span><br><span class="line"></span><br><span class="line">语法如下：</span><br><span class="line"></span><br><span class="line">execfile(filename[, <span class="built_in">globals</span>[, <span class="built_in">locals</span>]])</span><br><span class="line">参数有这么几个：</span><br><span class="line"></span><br><span class="line">filename：文件名。</span><br><span class="line"></span><br><span class="line"><span class="built_in">globals</span>：变量作用域，全局命名空间，如果被提供，则必须是一个字典对象。</span><br><span class="line"></span><br><span class="line"><span class="built_in">locals</span>：变量作用域，局部命名空间，如果被提供，可以是任何映射对象。</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>execfile(<span class="string">&quot;/usr/lib64/python2.7/os.py&quot;</span>)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line"><span class="number">6.</span> 使用 <span class="built_in">exec</span> 执行</span><br><span class="line">execfile 只能在 Python2 中使用，Python <span class="number">3.</span>x 里已经删除了这个函数。</span><br><span class="line"></span><br><span class="line">但是原理值得借鉴，你可以使用 <span class="built_in">open</span> … read 读取文件内容，然后再用 <span class="built_in">exec</span> 去执行模块。</span><br><span class="line"></span><br><span class="line">示例如下：</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;/usr/lib64/python2.7/os.py&quot;</span>, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line"><span class="meta">... </span>    <span class="built_in">exec</span>(f.read())</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>getcwd()</span><br><span class="line"><span class="string">&#x27;/home/wangbm&#x27;</span></span><br><span class="line"><span class="number">7.</span> import_from_github_com</span><br><span class="line">有一个包叫做 import_from_github_com，从名字上很容易得知，它是一个可以从 github 下载安装并导入的包。为了使用它，你需要做的就是按照如下命令使用pip 先安装它。</span><br><span class="line"></span><br><span class="line">$ python3 -m pip install import_from_github_com</span><br><span class="line">这个包使用了PEP <span class="number">302</span>中新的引入钩子，允许你可以从github上引入包。这个包实际做的就是安装这个包并将它添加到本地。你需要 Python <span class="number">3.2</span> 或者更高的版本，并且 git 和 pip 都已经安装才能使用这个包。</span><br><span class="line"></span><br><span class="line">pip 要保证是较新版本，如果不是请执行如下命令进行升级。</span><br><span class="line"></span><br><span class="line">$ python3 -m pip install --upgrade pip</span><br><span class="line">确保环境 ok 后，你就可以在 Python shell 中使用 import_from_github_com</span><br><span class="line"></span><br><span class="line">示例如下</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> github_com.zzzeek <span class="keyword">import</span> sqlalchemy</span><br><span class="line">Collecting git+https://github.com/zzzeek/sqlalchemy</span><br><span class="line">Cloning https://github.com/zzzeek/sqlalchemy to /tmp/pip-acfv7t06-build</span><br><span class="line">Installing collected packages: SQLAlchemy</span><br><span class="line">Running setup.py install <span class="keyword">for</span> SQLAlchemy ... done</span><br><span class="line">Successfully installed SQLAlchemy-<span class="number">1.1</span><span class="number">.0</span>b1.dev0</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">locals</span>()</span><br><span class="line">&#123;<span class="string">&#x27;__builtins__&#x27;</span>: &lt;module <span class="string">&#x27;builtins&#x27;</span> (built-<span class="keyword">in</span>)&gt;, <span class="string">&#x27;__spec__&#x27;</span>: <span class="literal">None</span>,</span><br><span class="line"><span class="string">&#x27;__package__&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;__doc__&#x27;</span>: <span class="literal">None</span>, <span class="string">&#x27;__name__&#x27;</span>: <span class="string">&#x27;__main__&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;sqlalchemy&#x27;</span>: &lt;module <span class="string">&#x27;sqlalchemy&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;/usr/local/lib/python3.5/site-packages/\</span></span><br><span class="line"><span class="string">sqlalchemy/__init__.py&#x27;</span>&gt;,</span><br><span class="line"><span class="string">&#x27;__loader__&#x27;</span>: &lt;<span class="keyword">class</span> <span class="string">&#x27;_frozen_importlib.BuiltinImporter&#x27;</span>&gt;&#125;</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">看了 import_from_github_com的源码后，你会注意到它并没有使用importlib。实际上，它的原理就是使用 pip 来安装那些没有安装的包，然后使用Python的<span class="built_in">__import__</span>()函数来引入新安装的模块。</span><br><span class="line"></span><br><span class="line"><span class="number">8.</span> 远程导入模块</span><br><span class="line">在后面有一篇文章里，深入剖析了导入模块的内部原理，并在最后手动实现了从远程服务器上读取模块内容，并在本地成功将模块导入的导入器。</span><br><span class="line"></span><br><span class="line">具体内容非常的多，你可以点击这个链接进行深入学习。</span><br><span class="line"></span><br><span class="line">示例代码如下：</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建一个 py 文件（my_importer.py），内容如下</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> importlib</span><br><span class="line"><span class="keyword">import</span> urllib.request <span class="keyword">as</span> urllib2</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UrlMetaFinder</span>(importlib.abc.MetaPathFinder):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, baseurl</span>):</span><br><span class="line">        self._baseurl = baseurl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">find_module</span>(<span class="params">self, fullname, path=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="keyword">if</span> path <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            baseurl = self._baseurl</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># 不是原定义的url就直接返回不存在</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> path.startswith(self._baseurl):</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">            baseurl = path</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            loader = UrlMetaLoader(baseurl)</span><br><span class="line">            <span class="keyword">return</span> loader</span><br><span class="line">        <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UrlMetaLoader</span>(importlib.abc.SourceLoader):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, baseurl</span>):</span><br><span class="line">        self.baseurl = baseurl</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_code</span>(<span class="params">self, fullname</span>):</span><br><span class="line">        f = urllib2.urlopen(self.get_filename(fullname))</span><br><span class="line">        <span class="keyword">return</span> f.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_data</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_filename</span>(<span class="params">self, fullname</span>):</span><br><span class="line">        <span class="keyword">return</span> self.baseurl + fullname + <span class="string">&#x27;.py&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">install_meta</span>(<span class="params">address</span>):</span><br><span class="line">    finder = UrlMetaFinder(address)</span><br><span class="line">    sys.meta_path.append(finder)</span><br><span class="line">并且在远程服务器上开启 http 服务（为了方便，我仅在本地进行演示），并且手动编辑一个名为 my_info 的 python 文件，如果后面导入成功会打印 ok。</span><br><span class="line"></span><br><span class="line">$ mkdir httpserver &amp;&amp; cd httpserver</span><br><span class="line">$ cat&gt;my_info.py&lt;EOF</span><br><span class="line">name=<span class="string">&#x27;wangbm&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">EOF</span><br><span class="line">$ cat my_info.py</span><br><span class="line">name=<span class="string">&#x27;wangbm&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">$</span><br><span class="line">$ python3 -m http.server <span class="number">12800</span></span><br><span class="line">Serving HTTP on <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span> port <span class="number">12800</span> (http://<span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">12800</span>/) ...</span><br><span class="line">...</span><br><span class="line">一切准备好，验证开始。</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> my_importer <span class="keyword">import</span> install_meta</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>install_meta(<span class="string">&#x27;http://localhost:12800/&#x27;</span>) <span class="comment"># 往 sys.meta_path 注册 finder</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> my_info  <span class="comment"># 打印ok，说明导入成功</span></span><br><span class="line">ok</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>my_info.name  <span class="comment"># 验证可以取得到变量</span></span><br><span class="line"><span class="string">&#x27;wangbm&#x27;</span></span><br></pre></td></tr></table></figure>
<p>使用from module import *默认情况下导入所有变量，可以在module中使用__all__来控制</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># profile.py</span></span><br><span class="line">name=<span class="string">&#x27;小明&#x27;</span></span><br><span class="line">age=<span class="number">18</span></span><br><span class="line"></span><br><span class="line">__all__=[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line"><span class="comment"># __all__仅在from module import *下适用</span></span><br></pre></td></tr></table></figure>
<p>重载的坑<br>由于有 sys.modules 的存在，当你导入一个已导入的模块时，实际上是没有效果的。</p>
<h3 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h3><p>Python 生态完备，有数以万计的 Python 爱好者愿意以 Python 为基础封装出各种有利于开发的第三方工具包。这使我们能够以最快的速度开发出一个满足基本需要的项目，而不是每次都重复造轮子。<br>pip 是官方推荐的包管理工具<br>其他的包管理工具：</p>
<ul>
<li>distutils：仅用于打包和安装，严格来讲不算是包管理工具</li>
<li>setuptools：distutils的增强版，扩展了distutils，提供更多的功能，引入包依赖的管理，easy_install就是它的一个命令行工具，引入了 egg 的文件格式。</li>
<li>Pipenv：一个集依赖包管理（pip）及虚拟环境管理（virtualenv）</li>
<li>等等<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询当前环境安装的所有软件包</span></span><br><span class="line">$ pip <span class="built_in">list</span></span><br><span class="line"><span class="comment"># 查询 pypi 上含有某名字的包</span></span><br><span class="line">$ pip search pkg</span><br><span class="line"><span class="comment"># 查询当前环境中可升级的包</span></span><br><span class="line">$ pip <span class="built_in">list</span> --outdated</span><br><span class="line"><span class="comment"># 查询一个包的详细内容</span></span><br><span class="line">$ pip show pkg</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在不安装软件包的情况下下载软件包到本地</span></span><br><span class="line">$ pip download --destination-directory /local/wheels -r requirements.txt</span><br><span class="line"><span class="comment"># 下载完，总归是要安装的，可以指定这个目录中安装软件包，而不从 pypi 上安装。</span></span><br><span class="line">$ pip install --no-index --find-links=/local/wheels -r requirements.txt</span><br><span class="line"><span class="comment"># 从下载的包中，自己构建生成 wheel 文件</span></span><br><span class="line">$ pip install wheel</span><br><span class="line">$ pip wheel --wheel-<span class="built_in">dir</span>=/local/wheels -r requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装软件包</span></span><br><span class="line">$ pip install &lt;pkg&gt;</span><br><span class="line"><span class="comment"># 只从本地安装，而不从 pypi 安装</span></span><br><span class="line"><span class="comment"># 前提你得保证你已经下载 pkg 包到 /local/wheels 目录下</span></span><br><span class="line">$ pip install --no-index --find-links=/local/wheels pkg</span><br><span class="line"><span class="comment"># 限定版本进行软件包安装</span></span><br><span class="line"><span class="comment"># 所安装的包的版本为 2.1.2</span></span><br><span class="line">$ pip install pkg==<span class="number">2.1</span><span class="number">.2</span></span><br><span class="line"><span class="comment"># 所安装的包必须大于等于 2.1.2</span></span><br><span class="line">$ pip install pkg&gt;=<span class="number">2.1</span><span class="number">.2</span></span><br><span class="line"><span class="comment"># 所安装的包必须小于等于 2.1.2</span></span><br><span class="line">$ pip install pkg&lt;=<span class="number">2.1</span><span class="number">.2</span></span><br><span class="line"><span class="comment"># 管理/控制整个 python 环境的包版本</span></span><br><span class="line"><span class="comment"># 导出依赖包列表</span></span><br><span class="line">pip freeze &gt;requirements.txt</span><br><span class="line"><span class="comment"># 从依赖包列表中安装</span></span><br><span class="line">pip install -r requirements.txt</span><br><span class="line"><span class="comment"># 确保当前环境软件包的版本(并不确保安装)</span></span><br><span class="line">pip install -c constraints.txt</span><br><span class="line"><span class="comment"># 限制不使用二进制包安装</span></span><br><span class="line"><span class="comment"># 下载非二进制的包</span></span><br><span class="line">$ pip download --no-binary=:<span class="built_in">all</span>: pkg</span><br><span class="line"><span class="comment">#　安装非二进制的包</span></span><br><span class="line">$ pip install pkg --no-binary</span><br><span class="line"><span class="comment"># 指定代理服务器安装——处在内网环境中，无法直接连接公网</span></span><br><span class="line"><span class="comment"># 可以使用两种方法</span></span><br><span class="line"><span class="comment"># 下载离线包拷贝到内网机器中安装——费时费力，无法处理包的依赖</span></span><br><span class="line"><span class="comment"># 使用代理服务器转发请求</span></span><br><span class="line">$ pip install --proxy [user:passwd@]http_server_ip:port pkg</span><br><span class="line"><span class="comment"># 长长的参数可以下载配置文件中，这样就不用每次安装包的时候都写了$HOME/.config/pip/pip.conf</span></span><br><span class="line"><span class="comment"># 安装用户私有软件包，python 的安装包是可以用户隔离的。</span></span><br><span class="line"><span class="comment"># 只要加上 --user 参数，pip 就会将其安装在当前用户的 ~/.local/lib/python3.x/site-packages 下，而其他用户的 python 则不会受影响。</span></span><br><span class="line">pip install --user pkg</span><br><span class="line"><span class="comment"># 网络不好，可以延长超时时间，避免ReadTimeout而失败</span></span><br><span class="line">$ pip install --default-timeout=<span class="number">100</span> &lt;packages&gt;</span><br><span class="line"><span class="comment"># 卸载软件包</span></span><br><span class="line">$ pip uninstall pkg</span><br><span class="line"><span class="comment"># 升级软件包</span></span><br><span class="line">$ pip install --upgrade pkg</span><br><span class="line"><span class="comment"># eager ：升级全部依赖包</span></span><br><span class="line"><span class="comment"># only-if-need：只有当旧版本不能适配新的父依赖包时，才会升级。</span></span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/03/28/python/PythonStudy/" data-id="cluc2gj2s000fac6z2ko60htq" data-title="pythonStudy" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2024/03/28/linux/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          Linux常用命令
        
      </div>
    </a>
  
  
    <a href="/2024/03/28/java/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">JavaStudy</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/03/29/linux/%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF/">发送消息</a>
          </li>
        
          <li>
            <a href="/2024/03/29/linux/%E6%8C%89%E6%97%B6%E5%BD%92%E6%A1%A3%E6%96%87%E4%BB%B6/">安置归档文件</a>
          </li>
        
          <li>
            <a href="/2024/03/28/JavaScript/JavaScriptStudy/">JavaScriptStudy</a>
          </li>
        
          <li>
            <a href="/2024/03/28/linux/Linux%E6%A6%82%E8%BF%B0/">Linux概述</a>
          </li>
        
          <li>
            <a href="/2024/03/28/linux/Linux%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/">Linux基本操作</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 XiaoLi<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>